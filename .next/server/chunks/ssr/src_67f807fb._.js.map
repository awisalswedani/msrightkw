{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/awis/Downloads/%D9%81%D9%82%D8%B7%20%D9%84%D8%AA%D8%AC%D8%B1%D8%A8%D8%A9%20%D8%A7%D9%84%D8%AF%D9%81%D8%B9%20%D9%88%D8%A8%D8%B9%D8%AF%D9%87%D8%A7%20%D9%84%D9%84%D9%85%D8%B3%D8%ADs/seller-frontend/src/components/ProductCard.tsx"],"sourcesContent":["'use client';\n\nimport Link from 'next/link';\nimport Image from 'next/image';\nimport { useState } from 'react';\nimport { useCart } from './CartContext';\nimport { formatPrice } from '@/utils/api';\nimport { useRouter } from 'next/navigation';\nimport i18n from '../i18n';\nimport { useLanguage } from '../context/LanguageContext';\nimport { WEB_CONSTANTS } from '../app/web_constantsthe';\n\ninterface ProductCardProps {\n  product: any;\n  config: any;\n  language?: string;\n}\n\nexport default function ProductCard({ product, config, language: propLanguage }: ProductCardProps) {\n  const { addToCart } = useCart();\n  const { direction, language: contextLanguage } = useLanguage();\n  const language = propLanguage || contextLanguage;\n  const [isAddingAdd, setIsAddingAdd] = useState(false);\n  const [isAddingBuy, setIsAddingBuy] = useState(false);\n  const [showSuccess, setShowSuccess] = useState(false);\n  const [isSlidingUp, setIsSlidingUp] = useState(false);\n  const [isSlidingDown, setIsSlidingDown] = useState(false);\n  const [toastVisible, setToastVisible] = useState(false);\n  const router = useRouter();\n  const isOutOfStock = product.current_stock <= 0;\n\n\n\n  // Add to cart only (no redirect)\n  const handleAddToCartOnly = async (e?: React.MouseEvent) => {\n    if (e) { e.preventDefault(); e.stopPropagation(); }\n    setIsAddingAdd(true);\n    try {\n      await addToCart(product.id, 1);\n      setShowSuccess(true);\n      setIsSlidingUp(true);\n      setIsSlidingDown(false);\n      setTimeout(() => {\n        setIsSlidingUp(false);\n        setIsSlidingDown(true);\n        setTimeout(() => {\n          setShowSuccess(false);\n          setIsSlidingDown(false);\n        }, 350); // slide down duration\n      }, 2000); // visible duration\n    } catch (error) {\n      console.error('Failed to add to cart:', error);\n    } finally {\n      setIsAddingAdd(false);\n    }\n  };\n\n  // Add to cart and go to cart\n  const handleBuyNow = async (e?: React.MouseEvent) => {\n    if (e) { e.preventDefault(); e.stopPropagation(); }\n    setIsAddingBuy(true);\n    try {\n      await addToCart(product.id, 1);\n      router.push('/cart');\n    } catch (error) {\n      console.error('Failed to add to cart:', error);\n    } finally {\n      setIsAddingBuy(false);\n    }\n  };\n\n  // Get the correct image URL\n  const imageUrl = product.thumbnail_full_url?.path || \n                  (product.images_full_url && product.images_full_url.length > 0 ? product.images_full_url[0].path : null);\n\n  // Calculate the final price based on discount type\n  const calculateFinalPrice = () => {\n    const unitPrice = parseFloat(product.unit_price) || 0;\n    const discount = parseFloat(product.discount) || 0;\n    \n    if (!discount || discount <= 0) return unitPrice;\n    \n    // Check if discount is percentage or flat\n    if (product.discount_type === 'percentage') {\n      return unitPrice - (unitPrice * discount / 100);\n    } else {\n      // Flat discount\n      return unitPrice - discount;\n    }\n  };\n\n  const finalPrice = calculateFinalPrice();\n  const formattedPrice = formatPrice(finalPrice, config, language);\n\n  // Determine if the product has variants\n  const hasVariants = (product.colors_formatted && product.colors_formatted.length > 0) || (product.choice_options && product.choice_options.length > 0);\n\n  function getLocalizedProductName(product: any, language: string) {\n    if (language === 'ar' && product.translations) {\n      const t = product.translations.find(\n        (tr: any) => tr.locale === 'kw' && tr.key === 'name'\n      );\n      if (t && t.value) return t.value;\n    } else if (language === 'en' && product.translations) {\n      const t = product.translations.find(\n        (tr: any) => tr.locale === 'en' && tr.key === 'name'\n      );\n      if (t && t.value) return t.value;\n    }\n    return product.name;\n  }\n\n  return (\n    <div\n      className={`bg-white border-none shadow-none rounded-md p-0 flex flex-col items-center w-full ${direction}`}\n      style={{ minWidth: 150, maxWidth: '100%' }}\n      dir={direction}\n    >\n      <Link href={`/product/${product.slug}`} className=\"w-full block\">\n        <div className={`relative w-full aspect-square bg-white rounded-md border border-gray-200 overflow-hidden flex items-center ${direction === 'rtl' ? 'justify-end' : 'justify-start'} hover:shadow-lg transition-shadow duration-200`}> \n          {imageUrl ? (\n            <Image\n              src={imageUrl}\n              alt={product.name}\n              fill\n              sizes=\"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 25vw\"\n              className=\"object-contain rounded-md\"\n              style={{ border: '1px solid #eee' }}\n            />\n          ) : (\n            <div className=\"flex items-center justify-center h-full\">\n              <svg className=\"w-12 h-12 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n              </svg>\n            </div>\n          )}\n          {/* Discount Badge */}\n          {product.discount && Number(product.discount) > 0 && (\n            <span\n              className={`absolute top-2 ${direction === 'rtl' ? 'right-2' : 'left-2'} bg-red-500 text-white text-xs font-semibold px-2 py-1 rounded-md z-10 shadow border border-white opacity-95 select-none pointer-events-none flex items-center gap-1`}\n            >\n              <svg className=\"w-3 h-3\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                <path fillRule=\"evenodd\" d=\"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V4z\" clipRule=\"evenodd\" />\n              </svg>\n              <span>{language === 'ar' ? 'مخفض' : 'SALE'}</span>\n            </span>\n          )}\n          {/* Out of Stock Badge */}\n          {isOutOfStock && (\n            <span\n              className={`absolute ${product.discount && Number(product.discount) > 0 ? 'top-12' : 'top-2'} ${direction === 'rtl' ? 'right-2' : 'left-2'} bg-gray-800 text-white text-xs font-semibold px-3 py-1 rounded-full z-10 shadow border border-white opacity-95 select-none pointer-events-none`}\n              style={{ letterSpacing: '0.03em' }}\n            >\n              {language === 'ar' ? 'غير متوفر' : 'Out of Stock'}\n            </span>\n          )}\n        </div>\n      </Link>\n      <div className=\"w-full flex-1 flex flex-col items-center px-2 pt-2 pb-3\">\n        <Link href={`/product/${product.slug}`} className=\"w-full block\">\n          <h3 className={`text-sm sm:text-base lg:text-lg font-medium text-black mb-1 truncate w-full ${direction === 'rtl' ? 'text-right' : 'text-left'}`}>{getLocalizedProductName(product, language)}</h3>\n        </Link>\n        <div className={`flex items-center gap-2 mb-3 w-full ${direction === 'rtl' ? 'justify-end flex-row-reverse' : 'justify-start'}`}> \n          <span className=\"text-base sm:text-lg lg:text-xl font-bold text-black\">\n            {formattedPrice}\n          </span>\n          {product.discount && Number(product.discount) > 0 ? (\n            <span className=\"text-sm text-gray-400 line-through\">\n              {formatPrice(product.unit_price, config, language)}\n            </span>\n          ) : null}\n        </div>\n        <div className={`flex w-full gap-2 mt-auto ${direction === 'rtl' ? 'flex-row-reverse' : ''}`}>\n          {hasVariants ? (\n            <Link href={`/product/${product.slug}`} className=\"flex-1\">\n              <button\n                className=\"w-full border rounded-md py-1.5 text-sm font-medium transition-colors bg-transparent\"\n                style={{ borderColor: WEB_CONSTANTS.primaryColor, color: WEB_CONSTANTS.primaryColor }}\n                type=\"button\"\n              >\n                {language === 'ar' ? 'أضف' : 'Add'}\n              </button>\n            </Link>\n          ) : (\n            <button\n              onClick={handleAddToCartOnly}\n              disabled={isAddingAdd || isAddingBuy || isOutOfStock}\n              className=\"flex-1 border rounded-md py-1.5 text-sm font-medium transition-colors bg-transparent disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center\"\n              style={{ borderColor: WEB_CONSTANTS.primaryColor, color: WEB_CONSTANTS.primaryColor }}\n              type=\"button\"\n            >\n              {isAddingAdd ? (\n                <svg className=\"animate-spin h-5 w-5\" style={{ color: WEB_CONSTANTS.primaryColor }} xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                  <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                  <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z\"></path>\n                </svg>\n              ) : (\n                language === 'ar' ? 'أضف' : 'Add'\n              )}\n            </button>\n          )}\n          {hasVariants ? (\n            <Link href={`/product/${product.slug}`} className=\"flex-1\">\n              <button\n                className=\"w-full text-white rounded-md py-1.5 text-sm font-medium transition-colors\"\n                style={{ background: WEB_CONSTANTS.primaryColor }}\n                type=\"button\"\n              >\n                {language === 'ar' ? 'اشتري' : 'Buy'}\n              </button>\n            </Link>\n          ) : (\n            <button\n              onClick={handleBuyNow}\n              disabled={isAddingAdd || isAddingBuy || isOutOfStock}\n              className=\"flex-1 text-white rounded-md py-1.5 text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center\"\n              style={{ background: WEB_CONSTANTS.primaryColor }}\n              type=\"button\"\n            >\n              {isAddingBuy ? (\n                <svg className=\"animate-spin h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                  <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                  <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z\"></path>\n                </svg>\n              ) : (\n                language === 'ar' ? 'اشتري' : 'Buy'\n              )}\n            </button>\n          )}\n        </div>\n      </div>\n      {showSuccess && (\n        <>\n          {/* Mobile & Tablet: Toast overlays nav bar, full width, no border radius, slides up then down */}\n          <div\n            className={`fixed bottom-0 left-0 w-full h-16 flex items-center justify-center bg-green-600 text-white text-lg font-bold z-[100] shadow-lg transition-transform duration-300 lg:hidden\n              ${isSlidingUp ? 'animate-slideUpMobile' : ''}\n              ${isSlidingDown ? 'animate-slideDownMobile' : ''}`}\n            style={{ borderRadius: 0, boxShadow: '0 -4px 24px 0 rgba(0,0,0,0.12)' }}\n          >\n            تمت الاضافة بنجاح\n          </div>\n          {/* Desktop: previous style */}\n          <div\n            className={`hidden lg:flex fixed right-6 bottom-6 px-4 py-3 bg-green-600 text-white rounded-2xl shadow-lg z-[100] text-lg font-bold animate-slideUp`}\n            style={{ borderRadius: '1.5rem', boxShadow: '0 4px 24px 0 rgba(0,0,0,0.12)' }}\n          >\n            تمت الاضافة بنجاح\n          </div>\n        </>\n      )}\n    </div>\n  );\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 459, "column": 0}, "map": {"version":3,"sources":["file:///Users/awis/Downloads/%D9%81%D9%82%D8%B7%20%D9%84%D8%AA%D8%AC%D8%B1%D8%A8%D8%A9%20%D8%A7%D9%84%D8%AF%D9%81%D8%B9%20%D9%88%D8%A8%D8%B9%D8%AF%D9%87%D8%A7%20%D9%84%D9%84%D9%85%D8%B3%D8%ADs/seller-frontend/src/lib/resilient-api.ts"],"sourcesContent":["import { getHeaders } from '@/utils/api';\n\nexport interface RetryConfig {\n  maxRetries: number;\n  timeoutMs: number;\n  backoffMultiplier: number;\n  autoRefreshOnFailure: boolean;\n}\n\nexport interface APIResponse<T> {\n  data: T | null;\n  success: boolean;\n  error?: string;\n  fromCache?: boolean;\n  retryAttempt?: number;\n}\n\nexport class ResilientAPIClient {\n  private static instance: ResilientAPIClient;\n  private failureCount = 0;\n  private maxAutoRefresh = 2;\n  private autoRefreshCount = 0;\n\n  private defaultConfig: RetryConfig = {\n    maxRetries: 3,\n    timeoutMs: 8000, // 8 seconds\n    backoffMultiplier: 1.5,\n    autoRefreshOnFailure: true\n  };\n\n  static getInstance(): ResilientAPIClient {\n    if (!ResilientAPIClient.instance) {\n      ResilientAPIClient.instance = new ResilientAPIClient();\n    }\n    return ResilientAPIClient.instance;\n  }\n\n  async fetchWithRetry<T>(\n    url: string,\n    options: RequestInit = {},\n    config: Partial<RetryConfig> = {}\n  ): Promise<APIResponse<T>> {\n    const finalConfig = { ...this.defaultConfig, ...config };\n    let lastError: Error | null = null;\n\n    for (let attempt = 1; attempt <= finalConfig.maxRetries; attempt++) {\n      try {\n        const response = await this.fetchWithTimeout(url, options, finalConfig.timeoutMs);\n        \n        if (response.ok) {\n          this.resetFailureCount();\n          const data = await response.json();\n          return {\n            data,\n            success: true,\n            retryAttempt: attempt > 1 ? attempt : undefined\n          };\n        } else {\n          throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n        }\n      } catch (error) {\n        lastError = error as Error;\n        this.failureCount++;\n\n        console.warn(`API attempt ${attempt} failed for ${url}:`, error);\n\n        // Don't retry on last attempt\n        if (attempt === finalConfig.maxRetries) {\n          break;\n        }\n\n        // Calculate delay with exponential backoff\n        const delay = Math.pow(finalConfig.backoffMultiplier, attempt - 1) * 1000;\n        await this.sleep(delay);\n      }\n    }\n\n    // All retries failed - check if we should auto-refresh\n    if (finalConfig.autoRefreshOnFailure && this.shouldAutoRefresh(lastError)) {\n      this.performAutoRefresh();\n      return {\n        data: null,\n        success: false,\n        error: 'Auto-refreshing page...'\n      };\n    }\n\n    return {\n      data: null,\n      success: false,\n      error: lastError?.message || 'Unknown error'\n    };\n  }\n\n  private async fetchWithTimeout(\n    url: string,\n    options: RequestInit,\n    timeoutMs: number\n  ): Promise<Response> {\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), timeoutMs);\n\n    try {\n      const response = await fetch(url, {\n        ...options,\n        signal: controller.signal\n      });\n      return response;\n    } finally {\n      clearTimeout(timeoutId);\n    }\n  }\n\n  private shouldAutoRefresh(error: Error | null): boolean {\n    if (this.autoRefreshCount >= this.maxAutoRefresh) {\n      return false;\n    }\n\n    if (!error) return false;\n\n    // Auto-refresh for specific error types\n    const autoRefreshErrors = [\n      'fetch failed',\n      'ENOTFOUND', \n      'CORS',\n      'AbortError',\n      'NetworkError',\n      'TypeError',\n      'Failed to fetch',\n      'Access-Control-Allow-Origin'\n    ];\n\n    return autoRefreshErrors.some(errorType => \n      error.message.includes(errorType) || error.name.includes(errorType)\n    );\n  }\n\n  private performAutoRefresh(): void {\n    this.autoRefreshCount++;\n    \n    // Show user-friendly message\n    this.showAutoRefreshMessage();\n\n    // Auto-refresh after 2 seconds\n    setTimeout(() => {\n      window.location.reload();\n    }, 2000);\n  }\n\n  private showAutoRefreshMessage(): void {\n    // Create a non-intrusive notification\n    const notification = document.createElement('div');\n    notification.style.cssText = `\n      position: fixed;\n      top: 20px;\n      right: 20px;\n      background: #3b82f6;\n      color: white;\n      padding: 12px 20px;\n      border-radius: 8px;\n      font-size: 14px;\n      z-index: 9999;\n      box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n      animation: slideIn 0.3s ease-out;\n    `;\n    \n    const isArabic = localStorage.getItem('language') === 'ar';\n    notification.textContent = isArabic \n      ? 'اتصال بطيء، جاري إعادة تحميل الصفحة...'\n      : 'Slow connection, refreshing page...';\n\n    // Add animation\n    const style = document.createElement('style');\n    style.textContent = `\n      @keyframes slideIn {\n        from { transform: translateX(100%); opacity: 0; }\n        to { transform: translateX(0); opacity: 1; }\n      }\n    `;\n    document.head.appendChild(style);\n    document.body.appendChild(notification);\n\n    // Remove after showing\n    setTimeout(() => {\n      notification.remove();\n      style.remove();\n    }, 1800);\n  }\n\n  private resetFailureCount(): void {\n    this.failureCount = 0;\n  }\n\n  private sleep(ms: number): Promise<void> {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  // Health check method\n  async checkAPIHealth(): Promise<boolean> {\n    try {\n      const response = await this.fetchWithTimeout(\n        'https://awisapp.com/api/v1/config',\n        { method: 'HEAD' },\n        3000\n      );\n      return response.ok;\n    } catch {\n      return false;\n    }\n  }\n\n  // Get failure statistics\n  getStats() {\n    return {\n      failureCount: this.failureCount,\n      autoRefreshCount: this.autoRefreshCount,\n      hasReachedMaxRefresh: this.autoRefreshCount >= this.maxAutoRefresh\n    };\n  }\n}\n\n// Singleton instance\nexport const resilientAPI = ResilientAPIClient.getInstance(); "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 635, "column": 0}, "map": {"version":3,"sources":["file:///Users/awis/Downloads/%D9%81%D9%82%D8%B7%20%D9%84%D8%AA%D8%AC%D8%B1%D8%A8%D8%A9%20%D8%A7%D9%84%D8%AF%D9%81%D8%B9%20%D9%88%D8%A8%D8%B9%D8%AF%D9%87%D8%A7%20%D9%84%D9%84%D9%85%D8%B3%D8%ADs/seller-frontend/src/lib/fallback-content.ts"],"sourcesContent":["// Embedded fallback content for offline/error scenarios\n// This content is bundled with the app and always available\n\nexport const FALLBACK_STORE_INFO = {\n  name: \"Ms Right kw\",\n  nameAr: \"الآنسة رايت الكويت\",\n  description: \"Educational toys that develop children's thinking and intelligence\",\n  descriptionAr: \"وسائل تعليمية تنمي تفكير وذكاء الأطفال\",\n  phone: \"+96592272809\",\n  email: \"ms.right.kw@gmail.com\",\n  whatsapp: \"https://wa.me/96592272809\",\n  instagram: \"https://www.instagram.com/ms.right.kw/\",\n  location: \"Kuwait\",\n  locationAr: \"الكويت\"\n};\n\nexport const FALLBACK_CATEGORIES = [\n  {\n    id: 1,\n    name: \"Educational Games\",\n    nameAr: \"ألعاب تعليمية\",\n    description: \"Games that enhance learning\"\n  },\n  {\n    id: 2,\n    name: \"Building Blocks\",\n    nameAr: \"مكعبات البناء\",\n    description: \"Creative building toys\"\n  },\n  {\n    id: 3,\n    name: \"Puzzles\",\n    nameAr: \"الألغاز\",\n    description: \"Mind-challenging puzzles\"\n  },\n  {\n    id: 4,\n    name: \"Art & Crafts\",\n    nameAr: \"الفنون والحرف\",\n    description: \"Creative art activities\"\n  },\n  {\n    id: 5,\n    name: \"Science Kits\",\n    nameAr: \"مجموعات العلوم\",\n    description: \"Hands-on science learning\"\n  },\n  {\n    id: 6,\n    name: \"Books\",\n    nameAr: \"الكتب\",\n    description: \"Educational reading materials\"\n  }\n];\n\nexport const FALLBACK_PRODUCTS = [\n  {\n    id: 1,\n    name: \"Magnetic Building Set\",\n    nameAr: \"مجموعة البناء المغناطيسية\",\n    price: 25.000,\n    currency: \"KWD\",\n    category: \"Building Blocks\",\n    categoryAr: \"مكعبات البناء\",\n    description: \"Creative magnetic building blocks for spatial thinking\",\n    descriptionAr: \"مكعبات بناء مغناطيسية إبداعية لتنمية التفكير المكاني\"\n  },\n  {\n    id: 2,\n    name: \"Educational Puzzle Game\",\n    nameAr: \"لعبة الألغاز التعليمية\",\n    price: 15.500,\n    currency: \"KWD\",\n    category: \"Puzzles\",\n    categoryAr: \"الألغاز\",\n    description: \"Mind-challenging puzzles for problem solving\",\n    descriptionAr: \"ألغاز تتحدى العقل لحل المشكلات\"\n  },\n  {\n    id: 3,\n    name: \"Science Experiment Kit\",\n    nameAr: \"مجموعة التجارب العلمية\",\n    price: 35.000,\n    currency: \"KWD\",\n    category: \"Science Kits\",\n    categoryAr: \"مجموعات العلوم\",\n    description: \"Hands-on science experiments for young learners\",\n    descriptionAr: \"تجارب علمية عملية للمتعلمين الصغار\"\n  },\n  {\n    id: 4,\n    name: \"Art & Craft Set\",\n    nameAr: \"مجموعة الفنون والحرف\",\n    price: 20.000,\n    currency: \"KWD\",\n    category: \"Art & Crafts\",\n    categoryAr: \"الفنون والحرف\",\n    description: \"Complete art set for creative expression\",\n    descriptionAr: \"مجموعة فنية كاملة للتعبير الإبداعي\"\n  },\n  {\n    id: 5,\n    name: \"Interactive Learning Book\",\n    nameAr: \"كتاب التعلم التفاعلي\",\n    price: 12.000,\n    currency: \"KWD\",\n    category: \"Books\",\n    categoryAr: \"الكتب\",\n    description: \"Interactive book with learning activities\",\n    descriptionAr: \"كتاب تفاعلي مع أنشطة تعليمية\"\n  },\n  {\n    id: 6,\n    name: \"Logic Game Set\",\n    nameAr: \"مجموعة ألعاب المنطق\",\n    price: 18.750,\n    currency: \"KWD\",\n    category: \"Educational Games\",\n    categoryAr: \"ألعاب تعليمية\",\n    description: \"Games that develop logical thinking\",\n    descriptionAr: \"ألعاب تطور التفكير المنطقي\"\n  }\n];\n\nexport const FALLBACK_CONFIG = {\n  currency_list: [\n    {\n      id: 1,\n      code: \"KWD\",\n      symbol: \"KD\",\n      status: true,\n      exchange_rate: \"1\"\n    }\n  ],\n  decimal_point_settings: 3\n};\n\n// Error messages for different scenarios\nexport const ERROR_MESSAGES = {\n  offline: {\n    en: {\n      title: \"You're Offline\",\n      message: \"No internet connection. Showing saved content.\",\n      action: \"Try Again\"\n    },\n    ar: {\n      title: \"لا يوجد اتصال\",\n      message: \"لا يوجد اتصال بالإنترنت. يتم عرض المحتوى المحفوظ.\",\n      action: \"إعادة المحاولة\"\n    }\n  },\n  apiError: {\n    en: {\n      title: \"Connection Problem\",\n      message: \"Having trouble connecting to our servers. Showing sample products.\",\n      action: \"Retry\",\n      contact: \"Contact us if the problem persists\"\n    },\n    ar: {\n      title: \"مشكلة في الاتصال\",\n      message: \"نواجه مشكلة في الاتصال بخوادمنا. يتم عرض منتجات عينة.\",\n      action: \"إعادة المحاولة\",\n      contact: \"اتصل بنا إذا استمرت المشكلة\"\n    }\n  },\n  timeout: {\n    en: {\n      title: \"Slow Connection\",\n      message: \"Your connection seems slow. We'll keep trying to load fresh content.\",\n      action: \"Refresh Page\"\n    },\n    ar: {\n      title: \"اتصال بطيء\",\n      message: \"يبدو أن اتصالك بطيء. سنستمر في محاولة تحميل المحتوى الجديد.\",\n      action: \"تحديث الصفحة\"\n    }\n  }\n};\n\n// Helper functions\nexport function getFallbackContent(language: string) {\n  const isArabic = language === 'ar';\n  \n  return {\n    store: {\n      name: isArabic ? FALLBACK_STORE_INFO.nameAr : FALLBACK_STORE_INFO.name,\n      description: isArabic ? FALLBACK_STORE_INFO.descriptionAr : FALLBACK_STORE_INFO.description,\n      phone: FALLBACK_STORE_INFO.phone,\n      email: FALLBACK_STORE_INFO.email,\n      whatsapp: FALLBACK_STORE_INFO.whatsapp,\n      instagram: FALLBACK_STORE_INFO.instagram,\n      location: isArabic ? FALLBACK_STORE_INFO.locationAr : FALLBACK_STORE_INFO.location\n    },\n    categories: FALLBACK_CATEGORIES.map(cat => ({\n      ...cat,\n      name: isArabic ? cat.nameAr : cat.name\n    })),\n    products: FALLBACK_PRODUCTS.map(product => ({\n      ...product,\n      name: isArabic ? product.nameAr : product.name,\n      description: isArabic ? product.descriptionAr : product.description,\n      category: isArabic ? FALLBACK_CATEGORIES.find(c => c.name === product.category)?.nameAr || product.category : product.category\n    })),\n    config: FALLBACK_CONFIG\n  };\n}\n\nexport function getErrorMessage(type: keyof typeof ERROR_MESSAGES, language: string) {\n  const isArabic = language === 'ar';\n  return ERROR_MESSAGES[type][isArabic ? 'ar' : 'en'];\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 851, "column": 0}, "map": {"version":3,"sources":["file:///Users/awis/Downloads/%D9%81%D9%82%D8%B7%20%D9%84%D8%AA%D8%AC%D8%B1%D8%A8%D8%A9%20%D8%A7%D9%84%D8%AF%D9%81%D8%B9%20%D9%88%D8%A8%D8%B9%D8%AF%D9%87%D8%A7%20%D9%84%D9%84%D9%85%D8%B3%D8%ADs/seller-frontend/src/components/SkeletonLoaders.tsx"],"sourcesContent":["\"use client\";\n\n// Skeleton loading components that match existing UI design\n\nexport function ProductCardSkeleton() {\n  return (\n    <div className=\"bg-white rounded-lg shadow hover:shadow-lg transition-shadow duration-300 overflow-hidden animate-pulse\">\n      {/* Product Image Skeleton */}\n      <div className=\"relative w-full bg-gray-200\" style={{ aspectRatio: '1/1' }}>\n        <div className=\"absolute inset-0 bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200 animate-shimmer\"></div>\n      </div>\n      \n      {/* Product Info Skeleton */}\n      <div className=\"p-4 space-y-3\">\n        {/* Product Name */}\n        <div className=\"h-5 bg-gray-200 rounded-md animate-shimmer\"></div>\n        <div className=\"h-4 bg-gray-200 rounded-md w-3/4 animate-shimmer\"></div>\n        \n        {/* Price */}\n        <div className=\"flex justify-between items-center mt-4\">\n          <div className=\"h-6 bg-gray-200 rounded-md w-20 animate-shimmer\"></div>\n          <div className=\"h-8 bg-gray-200 rounded-md w-24 animate-shimmer\"></div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport function CategoryPillSkeleton() {\n  return (\n    <div className=\"flex items-center gap-2 px-4 py-2 rounded-full border shadow-sm bg-white animate-pulse\" style={{ minWidth: '80px' }}>\n      <div className=\"w-7 h-7 bg-gray-200 rounded-full animate-shimmer\"></div>\n      <div className=\"h-4 bg-gray-200 rounded-md w-16 animate-shimmer\"></div>\n    </div>\n  );\n}\n\nexport function BannerSkeleton() {\n  return (\n    <div className=\"relative w-full rounded-xl sm:rounded-2xl overflow-hidden bg-gray-200 shadow-lg animate-pulse\">\n      <div className=\"w-full bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200 animate-shimmer\" style={{ aspectRatio: '16/9' }}>\n        <div className=\"absolute inset-0 flex items-center justify-center\">\n          <div className=\"text-center space-y-4\">\n            <div className=\"h-8 bg-gray-300 rounded-md w-64 mx-auto animate-shimmer\"></div>\n            <div className=\"h-5 bg-gray-300 rounded-md w-48 mx-auto animate-shimmer\"></div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport function ProductGridSkeleton({ count = 6 }: { count?: number }) {\n  return (\n    <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-3 xl:grid-cols-3 gap-4 sm:gap-5 md:gap-6 lg:gap-8 xl:gap-10 justify-items-center max-w-6xl mx-auto\">\n      {Array.from({ length: count }, (_, i) => (\n        <ProductCardSkeleton key={i} />\n      ))}\n    </div>\n  );\n}\n\nexport function CategorySectionSkeleton() {\n  return (\n    <div className=\"mb-10\">\n      <div className=\"flex flex-col items-center my-2\">\n        {/* Category Title Skeleton */}\n        <div className=\"h-8 bg-gray-200 rounded-md w-48 mb-2 animate-shimmer\"></div>\n        <div className=\"w-16 h-1 rounded-full bg-gray-200 mb-2 animate-shimmer\"></div>\n      </div>\n      <ProductGridSkeleton count={3} />\n    </div>\n  );\n}\n\nexport function HomepageSkeleton() {\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Banner Skeleton */}\n      <section className=\"relative bg-white py-6 sm:py-8 lg:py-12\">\n        <div className=\"w-full flex justify-center\">\n          <div className=\"relative w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 xl:px-12\">\n            <BannerSkeleton />\n          </div>\n        </div>\n      </section>\n\n      {/* Categories Skeleton */}\n      <section className=\"py-6 bg-white\">\n        <div className=\"max-w-7xl mx-auto px-0 sm:px-0 lg:px-0 flex justify-center\">\n          <div className=\"overflow-x-auto overflow-y-hidden no-scrollbar\">\n            <div className=\"flex gap-2 md:gap-3 w-max px-2\">\n              {Array.from({ length: 6 }, (_, i) => (\n                <CategoryPillSkeleton key={i} />\n              ))}\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Products Skeleton */}\n      <section className=\"py-8\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <CategorySectionSkeleton />\n          <CategorySectionSkeleton />\n        </div>\n      </section>\n    </div>\n  );\n}\n\nexport function ProductPageSkeleton() {\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header Skeleton */}\n      <header className=\"bg-white shadow-sm\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"relative flex items-center py-2 border-b border-gray-100 min-h-[48px]\">\n            <div className=\"absolute left-0 top-1/2 -translate-y-1/2 w-9 h-9 bg-gray-200 rounded-full animate-shimmer\"></div>\n            <div className=\"mx-auto h-6 bg-gray-200 rounded-md w-48 animate-shimmer\"></div>\n          </div>\n        </div>\n      </header>\n\n      {/* Product Details Skeleton */}\n      <section className=\"py-12\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-12\">\n            {/* Product Images Skeleton */}\n            <div className=\"space-y-4\">\n              <div className=\"w-full bg-gray-200 rounded-lg animate-shimmer\" style={{ aspectRatio: '1/1' }}></div>\n              <div className=\"flex space-x-2\">\n                {Array.from({ length: 4 }, (_, i) => (\n                  <div key={i} className=\"w-16 h-16 bg-gray-200 rounded-md animate-shimmer\"></div>\n                ))}\n              </div>\n            </div>\n\n            {/* Product Info Skeleton */}\n            <div className=\"space-y-6\">\n              <div className=\"h-8 bg-gray-200 rounded-md w-3/4 animate-shimmer\"></div>\n              <div className=\"h-6 bg-gray-200 rounded-md w-1/4 animate-shimmer\"></div>\n              <div className=\"space-y-2\">\n                <div className=\"h-4 bg-gray-200 rounded-md animate-shimmer\"></div>\n                <div className=\"h-4 bg-gray-200 rounded-md w-5/6 animate-shimmer\"></div>\n                <div className=\"h-4 bg-gray-200 rounded-md w-4/6 animate-shimmer\"></div>\n              </div>\n              <div className=\"h-12 bg-gray-200 rounded-md animate-shimmer\"></div>\n            </div>\n          </div>\n        </div>\n      </section>\n    </div>\n  );\n}\n\nexport function ProductsPageSkeleton() {\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header Skeleton */}\n      <header className=\"bg-white shadow-sm\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center py-6\">\n            <div className=\"h-7 bg-gray-200 rounded-md w-32 animate-shimmer\"></div>\n            <div className=\"hidden md:flex space-x-8 items-center\">\n              {Array.from({ length: 4 }, (_, i) => (\n                <div key={i} className=\"h-5 bg-gray-200 rounded-md w-16 animate-shimmer\"></div>\n              ))}\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Products Grid Skeleton */}\n      <section className=\"py-12\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n            {Array.from({ length: 12 }, (_, i) => (\n              <ProductCardSkeleton key={i} />\n            ))}\n          </div>\n        </div>\n      </section>\n    </div>\n  );\n}\n\n// Add shimmer animation styles\nconst shimmerStyles = `\n  @keyframes shimmer {\n    0% {\n      background-position: -200px 0;\n    }\n    100% {\n      background-position: calc(200px + 100%) 0;\n    }\n  }\n  .animate-shimmer {\n    background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\n    background-size: 200px 100%;\n    animation: shimmer 1.5s infinite;\n  }\n`;\n\n// Inject styles\nif (typeof document !== 'undefined') {\n  const styleSheet = document.createElement('style');\n  styleSheet.textContent = shimmerStyles;\n  document.head.appendChild(styleSheet);\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1449, "column": 0}, "map": {"version":3,"sources":["file:///Users/awis/Downloads/%D9%81%D9%82%D8%B7%20%D9%84%D8%AA%D8%AC%D8%B1%D8%A8%D8%A9%20%D8%A7%D9%84%D8%AF%D9%81%D8%B9%20%D9%88%D8%A8%D8%B9%D8%AF%D9%87%D8%A7%20%D9%84%D9%84%D9%85%D8%B3%D8%ADs/seller-frontend/src/components/OfflineErrorPage.tsx"],"sourcesContent":["\"use client\";\nimport { useState } from 'react';\nimport { useLanguage } from '@/context/LanguageContext';\nimport { getErrorMessage, getFallbackContent } from '@/lib/fallback-content';\nimport { WEB_CONSTANTS } from '@/app/web_constantsthe';\nimport ProductCard from './ProductCard';\n\ninterface OfflineErrorPageProps {\n  errorType: 'offline' | 'apiError' | 'timeout';\n  onRetry?: () => void;\n  showFallbackProducts?: boolean;\n}\n\nexport default function OfflineErrorPage({ \n  errorType, \n  onRetry, \n  showFallbackProducts = false \n}: OfflineErrorPageProps) {\n  const { language } = useLanguage();\n  const [isRetrying, setIsRetrying] = useState(false);\n  const errorMessage = getErrorMessage(errorType, language);\n  const fallbackContent = getFallbackContent(language);\n\n  const handleRetry = async () => {\n    if (!onRetry) {\n      window.location.reload();\n      return;\n    }\n\n    setIsRetrying(true);\n    try {\n      await onRetry();\n    } catch (error) {\n      console.error('Retry failed:', error);\n    } finally {\n      setIsRetrying(false);\n    }\n  };\n\n  const handleRefreshPage = () => {\n    window.location.reload();\n  };\n\n  const handleContact = () => {\n    window.open(`https://wa.me/96592272809`, '_blank');\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Error Message Section */}\n      <div className=\"bg-white shadow-sm\">\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n          <div className=\"text-center\">\n            {/* Error Icon */}\n            <div className=\"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 mb-6\">\n              {errorType === 'offline' ? (\n                <svg className=\"h-8 w-8 text-red-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M18.364 5.636l-12.728 12.728m0-12.728l12.728 12.728\" />\n                </svg>\n              ) : errorType === 'timeout' ? (\n                <svg className=\"h-8 w-8 text-red-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                </svg>\n              ) : (\n                <svg className=\"h-8 w-8 text-red-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z\" />\n                </svg>\n              )}\n            </div>\n\n            {/* Error Title */}\n            <h1 className=\"text-3xl font-bold text-gray-900 mb-4\">\n              {errorMessage.title}\n            </h1>\n\n            {/* Error Description */}\n            <p className=\"text-lg text-gray-600 mb-8 max-w-2xl mx-auto\">\n              {errorMessage.message}\n            </p>\n\n            {/* Action Buttons */}\n            <div className=\"flex flex-col sm:flex-row gap-4 justify-center items-center\">\n              <button\n                onClick={handleRetry}\n                disabled={isRetrying}\n                className=\"flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white shadow-sm hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300\"\n                style={{ backgroundColor: WEB_CONSTANTS.primaryColor }}\n              >\n                {isRetrying ? (\n                  <>\n                    <svg className=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                      <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                      <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z\"></path>\n                    </svg>\n                    {language === 'ar' ? 'جاري المحاولة...' : 'Retrying...'}\n                  </>\n                ) : (\n                  errorMessage.action\n                )}\n              </button>\n\n              {errorType !== 'timeout' && (\n                <button\n                  onClick={handleRefreshPage}\n                  className=\"px-6 py-3 border border-gray-300 text-base font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-all duration-300\"\n                >\n                  {language === 'ar' ? 'تحديث الصفحة' : 'Refresh Page'}\n                </button>\n              )}\n\n              {errorType === 'apiError' && 'contact' in errorMessage && (\n                <button\n                  onClick={handleContact}\n                  className=\"px-6 py-3 border border-gray-300 text-base font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-all duration-300\"\n                >\n                  {(errorMessage as any).contact}\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Fallback Products Section */}\n      {showFallbackProducts && (\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n          <div className=\"text-center mb-8\">\n            <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">\n              {language === 'ar' ? 'منتجات عينة' : 'Sample Products'}\n            </h2>\n            <p className=\"text-gray-600\">\n              {language === 'ar' \n                ? 'تصفح هذه المنتجات العينة حتى نستعيد الاتصال'\n                : 'Browse these sample products while we restore connection'\n              }\n            </p>\n          </div>\n\n          {/* Sample Products Grid */}\n          <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-3 xl:grid-cols-3 gap-4 sm:gap-5 md:gap-6 lg:gap-8 xl:gap-10 justify-items-center max-w-6xl mx-auto\">\n            {fallbackContent.products.slice(0, 6).map((product: any) => (\n              <div key={product.id} className=\"relative\">\n                {/* Overlay to indicate this is sample data */}\n                <div className=\"absolute top-2 right-2 z-10\">\n                  <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800\">\n                    {language === 'ar' ? 'عينة' : 'Sample'}\n                  </span>\n                </div>\n                \n                <ProductCard\n                  product={{\n                    ...product,\n                    id: product.id,\n                    name: product.name,\n                    price: product.price,\n                    image: '/awis.png', // Use local fallback image\n                    slug: `sample-${product.id}`,\n                    thumbnails: ['/awis.png']\n                  }}\n                  config={fallbackContent.config}\n                />\n              </div>\n            ))}\n          </div>\n\n          {/* Store Contact Info */}\n          <div className=\"mt-12 bg-white rounded-lg shadow-sm p-6\">\n            <div className=\"text-center\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">\n                {fallbackContent.store.name}\n              </h3>\n              <p className=\"text-gray-600 mb-4\">\n                {fallbackContent.store.description}\n              </p>\n              <div className=\"flex flex-col sm:flex-row gap-4 justify-center items-center\">\n                <a\n                  href={fallbackContent.store.whatsapp}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"flex items-center justify-center px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-colors\"\n                >\n                  <svg className=\"w-5 h-5 mr-2\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path d=\"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488\"/>\n                  </svg>\n                  WhatsApp\n                </a>\n                <a\n                  href={`tel:${fallbackContent.store.phone}`}\n                  className=\"flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors\"\n                >\n                  <svg className=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z\" />\n                  </svg>\n                  {fallbackContent.store.phone}\n                </a>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n} "],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;AACA;AALA;;;;;;;AAae,SAAS,iBAAiB,EACvC,SAAS,EACT,OAAO,EACP,uBAAuB,KAAK,EACN;IACtB,MAAM,EAAE,QAAQ,EAAE,GAAG,CAAA,GAAA,kIAAA,CAAA,cAAW,AAAD;IAC/B,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,eAAe,CAAA,GAAA,iIAAA,CAAA,kBAAe,AAAD,EAAE,WAAW;IAChD,MAAM,kBAAkB,CAAA,GAAA,iIAAA,CAAA,qBAAkB,AAAD,EAAE;IAE3C,MAAM,cAAc;QAClB,IAAI,CAAC,SAAS;YACZ,OAAO,QAAQ,CAAC,MAAM;YACtB;QACF;QAEA,cAAc;QACd,IAAI;YACF,MAAM;QACR,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,iBAAiB;QACjC,SAAU;YACR,cAAc;QAChB;IACF;IAEA,MAAM,oBAAoB;QACxB,OAAO,QAAQ,CAAC,MAAM;IACxB;IAEA,MAAM,gBAAgB;QACpB,OAAO,IAAI,CAAC,CAAC,yBAAyB,CAAC,EAAE;IAC3C;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAI,WAAU;;0CAEb,8OAAC;gCAAI,WAAU;0CACZ,cAAc,0BACb,8OAAC;oCAAI,WAAU;oCAAuB,MAAK;oCAAO,SAAQ;oCAAY,QAAO;8CAC3E,cAAA,8OAAC;wCAAK,eAAc;wCAAQ,gBAAe;wCAAQ,aAAa;wCAAG,GAAE;;;;;;;;;;2CAErE,cAAc,0BAChB,8OAAC;oCAAI,WAAU;oCAAuB,MAAK;oCAAO,SAAQ;oCAAY,QAAO;8CAC3E,cAAA,8OAAC;wCAAK,eAAc;wCAAQ,gBAAe;wCAAQ,aAAa;wCAAG,GAAE;;;;;;;;;;yDAGvE,8OAAC;oCAAI,WAAU;oCAAuB,MAAK;oCAAO,SAAQ;oCAAY,QAAO;8CAC3E,cAAA,8OAAC;wCAAK,eAAc;wCAAQ,gBAAe;wCAAQ,aAAa;wCAAG,GAAE;;;;;;;;;;;;;;;;0CAM3E,8OAAC;gCAAG,WAAU;0CACX,aAAa,KAAK;;;;;;0CAIrB,8OAAC;gCAAE,WAAU;0CACV,aAAa,OAAO;;;;;;0CAIvB,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCACC,SAAS;wCACT,UAAU;wCACV,WAAU;wCACV,OAAO;4CAAE,iBAAiB,8HAAA,CAAA,gBAAa,CAAC,YAAY;wCAAC;kDAEpD,2BACC;;8DACE,8OAAC;oDAAI,WAAU;oDAA6C,OAAM;oDAA6B,MAAK;oDAAO,SAAQ;;sEACjH,8OAAC;4DAAO,WAAU;4DAAa,IAAG;4DAAK,IAAG;4DAAK,GAAE;4DAAK,QAAO;4DAAe,aAAY;;;;;;sEACxF,8OAAC;4DAAK,WAAU;4DAAa,MAAK;4DAAe,GAAE;;;;;;;;;;;;gDAEpD,aAAa,OAAO,qBAAqB;;2DAG5C,aAAa,MAAM;;;;;;oCAItB,cAAc,2BACb,8OAAC;wCACC,SAAS;wCACT,WAAU;kDAET,aAAa,OAAO,iBAAiB;;;;;;oCAIzC,cAAc,cAAc,aAAa,8BACxC,8OAAC;wCACC,SAAS;wCACT,WAAU;kDAET,AAAC,aAAqB,OAAO;;;;;;;;;;;;;;;;;;;;;;;;;;;;YASzC,sCACC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;0CACX,aAAa,OAAO,gBAAgB;;;;;;0CAEvC,8OAAC;gCAAE,WAAU;0CACV,aAAa,OACV,gDACA;;;;;;;;;;;;kCAMR,8OAAC;wBAAI,WAAU;kCACZ,gBAAgB,QAAQ,CAAC,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,wBACzC,8OAAC;gCAAqB,WAAU;;kDAE9B,8OAAC;wCAAI,WAAU;kDACb,cAAA,8OAAC;4CAAK,WAAU;sDACb,aAAa,OAAO,SAAS;;;;;;;;;;;kDAIlC,8OAAC,iIAAA,CAAA,UAAW;wCACV,SAAS;4CACP,GAAG,OAAO;4CACV,IAAI,QAAQ,EAAE;4CACd,MAAM,QAAQ,IAAI;4CAClB,OAAO,QAAQ,KAAK;4CACpB,OAAO;4CACP,MAAM,CAAC,OAAO,EAAE,QAAQ,EAAE,EAAE;4CAC5B,YAAY;gDAAC;6CAAY;wCAC3B;wCACA,QAAQ,gBAAgB,MAAM;;;;;;;+BAlBxB,QAAQ,EAAE;;;;;;;;;;kCAyBxB,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAG,WAAU;8CACX,gBAAgB,KAAK,CAAC,IAAI;;;;;;8CAE7B,8OAAC;oCAAE,WAAU;8CACV,gBAAgB,KAAK,CAAC,WAAW;;;;;;8CAEpC,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CACC,MAAM,gBAAgB,KAAK,CAAC,QAAQ;4CACpC,QAAO;4CACP,KAAI;4CACJ,WAAU;;8DAEV,8OAAC;oDAAI,WAAU;oDAAe,MAAK;oDAAe,SAAQ;8DACxD,cAAA,8OAAC;wDAAK,GAAE;;;;;;;;;;;gDACJ;;;;;;;sDAGR,8OAAC;4CACC,MAAM,CAAC,IAAI,EAAE,gBAAgB,KAAK,CAAC,KAAK,EAAE;4CAC1C,WAAU;;8DAEV,8OAAC;oDAAI,WAAU;oDAAe,MAAK;oDAAO,QAAO;oDAAe,SAAQ;8DACtE,cAAA,8OAAC;wDAAK,eAAc;wDAAQ,gBAAe;wDAAQ,aAAa;wDAAG,GAAE;;;;;;;;;;;gDAEtE,gBAAgB,KAAK,CAAC,KAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAS9C","debugId":null}},
    {"offset": {"line": 1871, "column": 0}, "map": {"version":3,"sources":["file:///Users/awis/Downloads/%D9%81%D9%82%D8%B7%20%D9%84%D8%AA%D8%AC%D8%B1%D8%A8%D8%A9%20%D8%A7%D9%84%D8%AF%D9%81%D8%B9%20%D9%88%D8%A8%D8%B9%D8%AF%D9%87%D8%A7%20%D9%84%D9%84%D9%85%D8%B3%D8%ADs/seller-frontend/src/app/page.tsx"],"sourcesContent":["\"use client\";\nimport { useEffect, useState, useCallback } from 'react';\nimport Link from 'next/link';\nimport Image from 'next/image';\nimport { getSellerProducts, getSellerInfo, getSellerBanners, getConfig, formatPrice, getSellerCategories } from '@/utils/api';\nimport ProductCard from '@/components/ProductCard';\nimport CartIcon from '@/components/CartIcon';\nimport Header from '@/components/Header';\nimport clsx from 'clsx';\nimport Copyright from '@/components/Copyright';\nimport { WEB_CONSTANTS } from './web_constantsthe';\nimport ContactInfoBlock from '@/components/ContactInfoBlock';\nimport { useLanguage } from '../context/LanguageContext';\nimport i18n from '../i18n';\nimport Spinner from '../components/Spinner';\nimport { cache, getCachedDataInstant } from '@/lib/cache';\nimport { resilientAPI } from '@/lib/resilient-api';\nimport { getFallbackContent } from '@/lib/fallback-content';\nimport { HomepageSkeleton } from '@/components/SkeletonLoaders';\nimport OfflineErrorPage from '@/components/OfflineErrorPage';\n\nexport default function Home() {\n  const { language } = useLanguage();\n  const [productList, setProductList] = useState<any[]>([]);\n  const [seller, setSeller] = useState<any>(null);\n  const [config, setConfig] = useState<any>(null);\n  const [categories, setCategories] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedCategory, setSelectedCategory] = useState<'all' | number>('all');\n  const [productsByCategory, setProductsByCategory] = useState<Record<string, any[]>>({});\n  const [showInitialLoading, setShowInitialLoading] = useState(false);\n  const [languageChangeLoading, setLanguageChangeLoading] = useState(false);\n  const [isBackgroundRefreshing, setIsBackgroundRefreshing] = useState(false);\n  const [lastRefresh, setLastRefresh] = useState<number>(0);\n  const [hasInstantData, setHasInstantData] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [showFallback, setShowFallback] = useState(false);\n\n  // Check for instant cached data on mount\n  useEffect(() => {\n    if (typeof window !== 'undefined') {\n      const cachedSeller = getCachedDataInstant('seller', 'seller', language);\n      const cachedConfig = getCachedDataInstant('config', 'config', language);\n      const cachedCategories = getCachedDataInstant('categories', 'categories', language);\n      const cachedProducts = getCachedDataInstant('products', 'products', language, { limit: '1000', offset: '1' });\n\n      if (cachedSeller && cachedConfig && cachedCategories && cachedProducts) {\n        // We have cached data, show it immediately\n        setSeller(cachedSeller);\n        setConfig(cachedConfig);\n        const categoriesData = Array.isArray(cachedCategories) ? cachedCategories : [];\n        const productsData = (cachedProducts && typeof cachedProducts === 'object' && 'products' in cachedProducts) \n          ? cachedProducts.products as any[] : [];\n        setCategories(categoriesData);\n        setProductList(Array.isArray(productsData) ? productsData : []);\n        \n        // Group products by category\n        const byCat: Record<string, any[]> = {};\n        categoriesData.forEach((cat: any) => {\n          byCat[cat.id] = [];\n        });\n        (Array.isArray(productsData) ? productsData : []).forEach((product: any) => {\n          const catId = product.category_id || product.categoryId || (product.category && product.category.id);\n          if (catId && byCat[catId]) {\n            byCat[catId].push(product);\n          }\n        });\n        setProductsByCategory(byCat);\n        setLoading(false);\n        setHasInstantData(true);\n        \n        // Start background refresh\n        setIsBackgroundRefreshing(true);\n      } else {\n        // No cached data, show loading only if first visit\n        const hasVisited = sessionStorage.getItem('hasVisitedHome');\n        if (!hasVisited) {\n          setShowInitialLoading(true);\n          sessionStorage.setItem('hasVisitedHome', 'true');\n        }\n      }\n    }\n  }, [language]);\n\n  // Enhanced data fetching with cache-first approach\n  const fetchData = useCallback(async (isRefresh = false) => {\n    if (!isRefresh && !hasInstantData) {\n      setLoading(true);\n    } else if (isRefresh) {\n      setIsBackgroundRefreshing(true);\n    }\n\n    try {\n      // Always fetch fresh data (will use cache if available or offline)\n      const [configRes, productsRes, sellerRes, categoriesRes] = await Promise.all([\n        getConfig(),\n        getSellerProducts({ limit: '1000', offset: '1' }),\n        getSellerInfo(),\n        getSellerCategories()\n      ]);\n\n      setConfig(configRes);\n      setSeller(sellerRes);\n      setCategories(categoriesRes || []);\n      setProductList(productsRes?.products || []);\n\n      // Group products by category\n      const byCat: Record<string, any[]> = {};\n      (categoriesRes || []).forEach((cat: any) => {\n        byCat[cat.id] = [];\n      });\n      (productsRes?.products || []).forEach((product: any) => {\n        const catId = product.category_id || product.categoryId || (product.category && product.category.id);\n        if (catId && byCat[catId]) {\n          byCat[catId].push(product);\n        }\n      });\n      setProductsByCategory(byCat);\n      setLastRefresh(Date.now());\n\n    } catch (error: any) {\n      console.error('Failed to fetch data:', error);\n      \n      // Check if this is a network error that warrants fallback content\n      const isNetworkError = error.message?.includes('fetch failed') || \n                           error.message?.includes('ENOTFOUND') ||\n                           error.message?.includes('NetworkError') ||\n                           error.name === 'TypeError';\n\n      // If we have any cached data, continue showing it\n      if (seller || config || categories.length > 0) {\n        setError(error.message);\n        return; // Continue with cached data\n      }\n\n      // No cached data - show appropriate fallback\n      if (isNetworkError) {\n        // Auto-refresh for CORS/network errors (up to 2 times)\n        const apiStats = resilientAPI.getStats();\n        if (apiStats.autoRefreshCount < 2) {\n          console.log(`Auto-refreshing page due to ${error.name}: ${error.message}`);\n          // Show brief message before refresh\n          const isArabic = language === 'ar';\n          const notification = document.createElement('div');\n          notification.style.cssText = `\n            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);\n            background: #3b82f6; color: white; padding: 20px 30px;\n            border-radius: 12px; font-size: 16px; z-index: 9999;\n            box-shadow: 0 8px 32px rgba(0,0,0,0.3); text-align: center;\n            min-width: 300px;\n          `;\n          notification.innerHTML = `\n            <div style=\"margin-bottom: 10px;\">\n              <svg style=\"animation: spin 1s linear infinite; width: 24px; height: 24px; margin: 0 auto; display: block;\" viewBox=\"0 0 24 24\" fill=\"none\">\n                <circle cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\" stroke-dasharray=\"31.416\" stroke-dashoffset=\"31.416\" opacity=\"0.25\"/>\n                <path fill=\"currentColor\" d=\"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z\" opacity=\"0.75\"/>\n              </svg>\n            </div>\n            ${isArabic ? 'اتصال بطيء، جاري إعادة تحميل الصفحة...' : 'Slow connection, refreshing page...'}\n          `;\n          \n          // Add CSS animation\n          const style = document.createElement('style');\n          style.textContent = `\n            @keyframes spin {\n              0% { transform: rotate(0deg); }\n              100% { transform: rotate(360deg); }\n            }\n          `;\n          document.head.appendChild(style);\n          document.body.appendChild(notification);\n          \n          setTimeout(() => {\n            window.location.reload();\n          }, 2000);\n          return;\n        } else {\n          // Show fallback content after max auto-refreshes\n          setShowFallback(true);\n          const fallbackContent = getFallbackContent(language);\n          setSeller(fallbackContent.store);\n          setConfig(fallbackContent.config);\n          setCategories(fallbackContent.categories);\n          setProductList(fallbackContent.products);\n          \n          // Group fallback products by category\n          const byCat: Record<string, any[]> = {};\n          fallbackContent.categories.forEach((cat: any) => {\n            byCat[cat.id] = [];\n          });\n          fallbackContent.products.forEach((product: any) => {\n            const matchingCat = fallbackContent.categories.find(c => c.name === product.category);\n            if (matchingCat) {\n              byCat[matchingCat.id].push(product);\n            }\n          });\n          setProductsByCategory(byCat);\n        }\n      }\n      \n      setError(error.message);\n    } finally {\n      setLoading(false);\n      setIsBackgroundRefreshing(false);\n    }\n  }, [hasInstantData, seller, config, categories.length]);\n\n  // Initial data fetch\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  // Background refresh when language changes\n  useEffect(() => {\n    const refreshData = async () => {\n      // Only refresh if we already have data (not on initial load)\n      if (categories.length > 0) {\n        setLanguageChangeLoading(true);\n        try {\n          await fetchData(true);\n        } catch (error) {\n          console.error('Failed to refresh data:', error);\n        } finally {\n          setLanguageChangeLoading(false);\n        }\n      }\n    };\n    \n    refreshData();\n  }, [language]);\n\n  // Periodic background refresh (every 5 minutes when online)\n  useEffect(() => {\n    if (!cache.isOffline() && categories.length > 0) {\n      const interval = setInterval(() => {\n        const now = Date.now();\n        // Only refresh if last refresh was more than 5 minutes ago\n        if (now - lastRefresh > 5 * 60 * 1000) {\n          fetchData(true);\n        }\n      }, 60 * 1000); // Check every minute\n\n      return () => clearInterval(interval);\n    }\n  }, [fetchData, lastRefresh, categories.length]);\n\n  // Online status change handler\n  useEffect(() => {\n    const unsubscribe = cache.onOnlineStatusChange((isOnline) => {\n      if (isOnline && categories.length > 0) {\n        // Refresh data when coming back online\n        setTimeout(() => fetchData(true), 1000);\n      }\n    });\n\n    return unsubscribe;\n  }, [fetchData, categories.length]);\n\n  useEffect(() => {\n    if (!loading && showInitialLoading) {\n      // Hide spinner after data is loaded\n      setTimeout(() => setShowInitialLoading(false), 600); // short delay for smoothness\n    }\n  }, [loading, showInitialLoading]);\n\n  // Show skeleton loading for better UX\n  if ((loading && !hasInstantData && !showFallback) || languageChangeLoading) {\n    return <HomepageSkeleton />;\n  }\n\n  // Show fallback error page if needed\n  if (showFallback && error) {\n    return (\n      <OfflineErrorPage \n        errorType=\"apiError\" \n        onRetry={() => {\n          setShowFallback(false);\n          setError(null);\n          fetchData();\n        }}\n        showFallbackProducts={true}\n      />\n    );\n  }\n\n  // Helper to render products grid\n  function ProductsGrid({ products }: { products: any[] }) {\n    if (!products || products.length === 0) {\n      return <div className=\"text-center text-gray-400 py-8\">لا يوجد منتجات في هذا القسم</div>;\n    }\n    return (\n      <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-3 xl:grid-cols-3 gap-4 sm:gap-5 md:gap-6 lg:gap-8 xl:gap-10 justify-items-center max-w-6xl mx-auto\">\n        {products.map((product: any) => (\n          <ProductCard key={product.id} product={product} config={config} />\n        ))}\n      </div>\n    );\n  }\n\n  // --- UI ---\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Background refresh indicator */}\n      {isBackgroundRefreshing && (\n        <div className=\"fixed top-16 right-4 z-40 bg-blue-500 text-white px-3 py-1 rounded-md text-xs\">\n          {language === 'ar' ? 'تحديث...' : 'Updating...'}\n        </div>\n      )}\n\n      {/* Hero Section with Shop Banner */}\n      <section className=\"relative bg-white py-6 sm:py-8 lg:py-12\">\n        <div className=\"w-full flex justify-center\">\n          <div className=\"relative w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 xl:px-12\">\n            <div className=\"relative w-full rounded-xl sm:rounded-2xl overflow-hidden bg-gray-200 shadow-lg hover:shadow-xl transition-shadow duration-300\">\n              {seller?.seller?.shop?.banner_full_url?.path ? (\n                <div className=\"relative w-full\">\n                  <Image\n                    src={seller.seller.shop.banner_full_url.path}\n                    alt={`${seller.seller.shop.name} - Shop Banner`}\n                    width={1200}\n                    height={400}\n                    className=\"w-full h-auto object-cover transition-transform duration-300 hover:scale-105\"\n                    sizes=\"(max-width: 640px) 100vw, (max-width: 768px) 100vw, (max-width: 1024px) 100vw, 1200px\"\n                    priority\n                  />\n                </div>\n              ) : (\n                <div className=\"w-full bg-gradient-to-br from-blue-600 via-purple-600 to-indigo-700 flex items-center justify-center\" style={{ aspectRatio: '16/9' }}>\n                  <div className=\"text-center text-white px-4\">\n                    <h1 className=\"text-2xl sm:text-3xl md:text-4xl font-bold mb-2\">\n                      {seller?.seller?.shop?.name || 'Welcome to Our Store'}\n                    </h1>\n                    <p className=\"text-sm sm:text-base md:text-lg opacity-90\">\n                      Discover amazing products at great prices\n                    </p>\n                  </div>\n                </div>\n              )}\n              \n              {/* Subtle overlay for better text readability */}\n              <div className=\"absolute inset-0 bg-gradient-to-t from-black/10 via-transparent to-transparent pointer-events-none\"></div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Categories Section - horizontal scrollable list */}\n      {categories.length > 0 && (\n        <section className=\"py-6 bg-white\">\n          <div className=\"max-w-7xl mx-auto px-0 sm:px-0 lg:px-0 flex justify-center\">\n            <div className=\"overflow-x-auto overflow-y-hidden no-scrollbar\">\n              <div className=\"flex gap-2 md:gap-3 w-max px-2\">\n                {/* Custom 'All Products' category as pill */}\n                <button\n                  type=\"button\"\n                  onClick={() => setSelectedCategory('all')}\n                  className={clsx(\n                    'flex items-center gap-2 px-4 py-2 rounded-full text-sm font-semibold transition-all duration-200 border shadow-sm',\n                    selectedCategory === 'all'\n                      ? 'text-white border-[#991b1b] shadow-lg scale-105'\n                      : 'bg-white text-gray-700 border-gray-200 hover:bg-gray-50 hover:border-[#991b1b] hover:text-[#991b1b]'\n                  )}\n                  style={selectedCategory === 'all' ? { minWidth: '80px', background: WEB_CONSTANTS.primaryColor, borderColor: WEB_CONSTANTS.primaryColor } : { minWidth: '80px' }}\n                >\n                  {seller?.seller?.image_full_url?.path && (\n                    <Image\n                      src={seller.seller.image_full_url.path}\n                      alt=\"الكل\"\n                      width={28}\n                      height={28}\n                      className=\"rounded-full border border-gray-200 bg-white\"\n                    />\n                  )}\n                  <span>{language === 'ar' ? 'الكل' : i18n.t('all')}</span>\n                </button>\n              {categories.map((category: any) => {\n                const categoryName = category.name || category.title || category.category_name || 'Category';\n                  const categoryImage = category.icon_full_url?.path || category.icon || category.image?.path || category.image_full_url?.path;\n                return (\n                    <button\n                      type=\"button\"\n                    key={category.id} \n                      onClick={() => setSelectedCategory(category.id)}\n                      className={clsx(\n                        'flex items-center gap-2 px-4 py-2 rounded-full text-sm font-semibold transition-all duration-200 border shadow-sm',\n                        selectedCategory === category.id\n                          ? 'text-white border-[#991b1b] shadow-lg scale-105'\n                          : 'bg-white text-gray-700 border-gray-200 hover:bg-gray-50 hover:border-[#991b1b] hover:text-[#991b1b]'\n                      )}\n                      style={selectedCategory === category.id ? { minWidth: '80px', background: WEB_CONSTANTS.primaryColor, borderColor: WEB_CONSTANTS.primaryColor } : { minWidth: '80px' }}\n                    >\n                      {categoryImage && (\n            <Image\n                            src={categoryImage}\n                            alt={categoryName}\n                          width={28}\n                          height={28}\n                          className=\"rounded-full border border-gray-200 bg-white\"\n                        />\n                        )}\n                      <span>{categoryName}</span>\n                    </button>\n                );\n              })}\n              </div>\n            </div>\n          </div>\n        </section>\n      )}\n\n      {/* Dynamic Category/Product Display */}\n      <section className=\"py-8\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          {selectedCategory === 'all' ? (\n            categories.map((category: any) => (\n              <div key={category.id} className=\"mb-10\">\n                <div className=\"flex flex-col items-center my-2\">\n                  <h2 className=\"text-3xl font-extrabold text-gray-900 text-center tracking-wide mb-2\" style={{letterSpacing: '0.02em'}}>\n                    {category.name || category.title || category.category_name || 'Category'}\n            </h2>\n                  <div className=\"w-16 h-1 rounded-full opacity-70 mb-2\" style={{ background: WEB_CONSTANTS.primaryColor }}></div>\n          </div>\n                <ProductsGrid products={productsByCategory[category.id] || []} />\n            </div>\n            ))\n          ) : (\n            <div>\n              <div className=\"flex flex-col items-center my-2\">\n                <h2 className=\"text-3xl font-extrabold text-gray-900 text-center tracking-wide mb-2\" style={{letterSpacing: '0.02em'}}>\n                  {categories.find((cat: any) => cat.id === selectedCategory)?.name || 'Category'}\n                </h2>\n                <div className=\"w-16 h-1 rounded-full opacity-70 mb-2\" style={{ background: WEB_CONSTANTS.primaryColor }}></div>\n              </div>\n              <ProductsGrid products={productsByCategory[selectedCategory] || []} />\n              </div>\n          )}\n        </div>\n      </section>\n\n      {/* Footer */}\n      {/* Desktop Footer */}\n      <footer className=\"hidden lg:block bg-gray-900 text-white py-10\">\n        <div className=\"max-w-xl mx-auto flex flex-col items-center space-y-6 px-4\">\n          {/* Seller Logo */}\n          {seller?.seller?.image_full_url?.path && (\n            <Image\n              src={seller.seller.image_full_url.path}\n              alt=\"Seller Logo\"\n              width={80}\n              height={80}\n              className=\"rounded-full border border-gray-200 bg-white p-2 shadow mb-2\"\n            />\n          )}\n          <ContactInfoBlock textColor=\"white\" />\n          {/* Copyright */}\n          <Copyright className=\"mt-6\" whiteText={true} />\n        </div>\n      </footer>\n      {/* Mobile/Tablet Copyright Only */}\n      <div className=\"block lg:hidden w-full flex justify-center py-6\">\n        <Copyright />\n      </div>\n      {/* Mobile Bottom Navigation Bar */}\n      <nav className=\"fixed bottom-0 left-0 right-0 z-50 bg-white border-t border-gray-200 shadow-lg lg:hidden flex justify-around items-center h-16\">\n        <a href=\"/\" className=\"flex flex-col items-center justify-center text-xs font-semibold transition-colors group text-[#991b1b] border-t-2 border-[#991b1b] pt-1 w-full\">\n          <svg className=\"w-6 h-6 mb-0.5\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\">\n            <rect x=\"3\" y=\"3\" width=\"7\" height=\"7\" rx=\"1.5\" stroke=\"currentColor\"/>\n            <rect x=\"14\" y=\"3\" width=\"7\" height=\"7\" rx=\"1.5\" stroke=\"currentColor\"/>\n            <rect x=\"14\" y=\"14\" width=\"7\" height=\"7\" rx=\"1.5\" stroke=\"currentColor\"/>\n            <rect x=\"3\" y=\"14\" width=\"7\" height=\"7\" rx=\"1.5\" stroke=\"currentColor\"/>\n          </svg>\n          {language === 'ar' ? 'القائمة' : i18n.t('menu')}\n        </a>\n        <a href=\"/orders\" className=\"flex flex-col items-center justify-center text-xs font-semibold transition-colors group text-gray-700 hover:text-[#991b1b] pt-1 w-full\">\n          <svg className=\"w-6 h-6 mb-0.5\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\">\n            <rect x=\"4\" y=\"4\" width=\"16\" height=\"16\" rx=\"2\" stroke=\"currentColor\"/>\n            <path d=\"M8 10h8M8 14h5\" stroke=\"currentColor\"/>\n          </svg>\n          {language === 'ar' ? 'حالة الطلب' : i18n.t('order_status')}\n        </a>\n        <a href=\"/cart\" className=\"flex flex-col items-center justify-center text-xs font-semibold transition-colors group text-gray-700 hover:text-[#991b1b] pt-1 w-full\">\n          <svg className=\"w-6 h-6 mb-0.5\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\">\n            <path d=\"M3 6h18M7 6v14a2 2 0 002 2h6a2 2 0 002-2V6\" stroke=\"currentColor\"/>\n            <circle cx=\"9\" cy=\"21\" r=\"1\" stroke=\"currentColor\"/>\n            <circle cx=\"15\" cy=\"21\" r=\"1\" stroke=\"currentColor\"/>\n          </svg>\n          {language === 'ar' ? 'السلة' : i18n.t('cart')}\n        </a>\n        <a href=\"/login\" className=\"flex flex-col items-center justify-center text-xs font-semibold transition-colors group text-gray-700 hover:text-[#991b1b] pt-1 w-full\">\n          <svg className=\"w-6 h-6 mb-0.5\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\">\n            <circle cx=\"12\" cy=\"8\" r=\"4\" stroke=\"currentColor\"/>\n            <path d=\"M4 20v-1a4 4 0 014-4h8a4 4 0 014 4v1\" stroke=\"currentColor\"/>\n          </svg>\n          {language === 'ar' ? 'تسجيل دخول' : i18n.t('login')}\n        </a>\n        <a href=\"/more\" className=\"flex flex-col items-center justify-center text-xs font-semibold transition-colors group text-gray-700 hover:text-[#991b1b] pt-1 w-full\">\n          <svg className=\"w-6 h-6 mb-0.5\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\">\n            <rect x=\"4\" y=\"4\" width=\"16\" height=\"16\" rx=\"2\" stroke=\"currentColor\"/>\n            <path d=\"M8 8h8M8 12h8M8 16h8\" stroke=\"currentColor\"/>\n          </svg>\n          {language === 'ar' ? 'المزيد' : i18n.t('more')}\n        </a>\n      </nav>\n      <div className=\"h-20 lg:hidden\" />\n    </div>\n  );\n}\n\n/* Add this to the bottom of the file if using CSS-in-JS, or add to global CSS if not: */\n/*\n.no-scrollbar::-webkit-scrollbar {\n  display: none;\n}\n.no-scrollbar {\n  -ms-overflow-style: none;\n  scrollbar-width: none;\n}\n*/\n"],"names":[],"mappings":"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","debugId":null}}]
}