{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":["turbopack:///[next]/internal/font/google/geist_f8791666.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"className\": \"geist_f8791666-module__7xgGRG__className\",\n  \"variable\": \"geist_f8791666-module__7xgGRG__variable\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA","ignoreList":[0]}},
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[next]/internal/font/google/geist_f8791666.js"],"sourcesContent":["import cssModule from \"@vercel/turbopack-next/internal/font/google/cssmodule.module.css?{%22path%22:%22ClientLayout.tsx%22,%22import%22:%22Geist%22,%22arguments%22:[{%22variable%22:%22--font-geist-sans%22,%22subsets%22:[%22latin%22]}],%22variableName%22:%22geistSans%22}\";\nconst fontData = {\n    className: cssModule.className,\n    style: {\n        fontFamily: \"'Geist', 'Geist Fallback'\",\n        fontStyle: \"normal\",\n\n    },\n};\n\nif (cssModule.variable != null) {\n    fontData.variable = cssModule.variable;\n}\n\nexport default fontData;\n"],"names":[],"mappings":";;;AAAA;;AACA,MAAM,WAAW;IACb,WAAW,wJAAA,CAAA,UAAS,CAAC,SAAS;IAC9B,OAAO;QACH,YAAY;QACZ,WAAW;IAEf;AACJ;AAEA,IAAI,wJAAA,CAAA,UAAS,CAAC,QAAQ,IAAI,MAAM;IAC5B,SAAS,QAAQ,GAAG,wJAAA,CAAA,UAAS,CAAC,QAAQ;AAC1C;uCAEe","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["turbopack:///[next]/internal/font/google/geist_mono_fffeda03.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"className\": \"geist_mono_fffeda03-module__9UHtjq__className\",\n  \"variable\": \"geist_mono_fffeda03-module__9UHtjq__variable\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA","ignoreList":[0]}},
    {"offset": {"line": 47, "column": 0}, "map": {"version":3,"sources":["turbopack:///[next]/internal/font/google/geist_mono_fffeda03.js"],"sourcesContent":["import cssModule from \"@vercel/turbopack-next/internal/font/google/cssmodule.module.css?{%22path%22:%22ClientLayout.tsx%22,%22import%22:%22Geist_Mono%22,%22arguments%22:[{%22variable%22:%22--font-geist-mono%22,%22subsets%22:[%22latin%22]}],%22variableName%22:%22geistMono%22}\";\nconst fontData = {\n    className: cssModule.className,\n    style: {\n        fontFamily: \"'Geist Mono', 'Geist Mono Fallback'\",\n        fontStyle: \"normal\",\n\n    },\n};\n\nif (cssModule.variable != null) {\n    fontData.variable = cssModule.variable;\n}\n\nexport default fontData;\n"],"names":[],"mappings":";;;AAAA;;AACA,MAAM,WAAW;IACb,WAAW,6JAAA,CAAA,UAAS,CAAC,SAAS;IAC9B,OAAO;QACH,YAAY;QACZ,WAAW;IAEf;AACJ;AAEA,IAAI,6JAAA,CAAA,UAAS,CAAC,QAAQ,IAAI,MAAM;IAC5B,SAAS,QAAQ,GAAG,6JAAA,CAAA,UAAS,CAAC,QAAQ;AAC1C;uCAEe","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 69, "column": 0}, "map": {"version":3,"sources":["file:///Users/awis/Downloads/%D9%81%D9%82%D8%B7%20%D9%84%D8%AA%D8%AC%D8%B1%D8%A8%D8%A9%20%D8%A7%D9%84%D8%AF%D9%81%D8%B9%20%D9%88%D8%A8%D8%B9%D8%AF%D9%87%D8%A7%20%D9%84%D9%84%D9%85%D8%B3%D8%ADs/seller-frontend/src/lib/cache.ts"],"sourcesContent":["// Comprehensive caching system for the e-commerce app\nexport interface CacheItem<T = any> {\n  data: T;\n  timestamp: number;\n  language: string;\n  expiryTime: number;\n}\n\nexport interface CacheConfig {\n  ttl: number; // Time to live in milliseconds\n  maxAge: number; // Maximum age before stale\n  staleWhileRevalidate: boolean;\n}\n\nexport class AppCache {\n  private static instance: AppCache;\n  private cache = new Map<string, CacheItem>();\n  private isOnline = true;\n  private onlineCallbacks: ((isOnline: boolean) => void)[] = [];\n  private isClient = false;\n\n  // Cache configurations for different data types\n  private cacheConfigs: Record<string, CacheConfig> = {\n    seller: { ttl: 30 * 60 * 1000, maxAge: 60 * 60 * 1000, staleWhileRevalidate: true }, // 30min TTL, 1hr max\n    config: { ttl: 30 * 60 * 1000, maxAge: 60 * 60 * 1000, staleWhileRevalidate: true },\n    categories: { ttl: 15 * 60 * 1000, maxAge: 30 * 60 * 1000, staleWhileRevalidate: true }, // 15min TTL, 30min max\n    products: { ttl: 10 * 60 * 1000, maxAge: 20 * 60 * 1000, staleWhileRevalidate: true }, // 10min TTL, 20min max\n    product: { ttl: 10 * 60 * 1000, maxAge: 20 * 60 * 1000, staleWhileRevalidate: true },\n    static: { ttl: 24 * 60 * 60 * 1000, maxAge: 48 * 60 * 60 * 1000, staleWhileRevalidate: true }, // 24hr TTL, 48hr max\n  };\n\n  private constructor() {\n    this.isClient = typeof window !== 'undefined';\n    if (this.isClient) {\n      this.initializeOnlineDetection();\n      this.loadFromLocalStorage();\n    }\n  }\n\n  static getInstance(): AppCache {\n    if (!AppCache.instance) {\n      AppCache.instance = new AppCache();\n    }\n    return AppCache.instance;\n  }\n\n  private initializeOnlineDetection() {\n    if (!this.isClient) return;\n    \n    this.isOnline = navigator.onLine;\n    \n    window.addEventListener('online', () => {\n      this.isOnline = true;\n      this.notifyOnlineCallbacks(true);\n    });\n    \n    window.addEventListener('offline', () => {\n      this.isOnline = false;\n      this.notifyOnlineCallbacks(false);\n    });\n  }\n\n  private notifyOnlineCallbacks(isOnline: boolean) {\n    this.onlineCallbacks.forEach(callback => callback(isOnline));\n  }\n\n  onOnlineStatusChange(callback: (isOnline: boolean) => void) {\n    this.onlineCallbacks.push(callback);\n    return () => {\n      const index = this.onlineCallbacks.indexOf(callback);\n      if (index > -1) {\n        this.onlineCallbacks.splice(index, 1);\n      }\n    };\n  }\n\n  isOffline(): boolean {\n    return !this.isOnline;\n  }\n\n  private generateKey(key: string, language: string, params?: Record<string, any>): string {\n    const paramString = params ? JSON.stringify(params) : '';\n    return `${key}_${language}_${paramString}`;\n  }\n\n  private loadFromLocalStorage() {\n    if (!this.isClient) return;\n    \n    try {\n      const stored = localStorage.getItem('app_cache');\n      if (stored) {\n        const parsed = JSON.parse(stored);\n        this.cache = new Map(parsed);\n      }\n    } catch (error) {\n      console.warn('Failed to load cache from localStorage:', error);\n    }\n  }\n\n  private saveToLocalStorage() {\n    if (!this.isClient) return;\n    \n    try {\n      const serialized = JSON.stringify(Array.from(this.cache.entries()));\n      localStorage.setItem('app_cache', serialized);\n    } catch (error) {\n      console.warn('Failed to save cache to localStorage:', error);\n    }\n  }\n\n  private isExpired(item: CacheItem, config: CacheConfig): boolean {\n    const now = Date.now();\n    return now - item.timestamp > config.maxAge;\n  }\n\n  private isStale(item: CacheItem, config: CacheConfig): boolean {\n    const now = Date.now();\n    return now - item.timestamp > config.ttl;\n  }\n\n  set<T>(key: string, data: T, type: keyof typeof this.cacheConfigs, language: string, params?: Record<string, any>): void {\n    const cacheKey = this.generateKey(key, language, params);\n    const config = this.cacheConfigs[type];\n    \n    const item: CacheItem<T> = {\n      data,\n      timestamp: Date.now(),\n      language,\n      expiryTime: Date.now() + config.maxAge,\n    };\n\n    this.cache.set(cacheKey, item);\n    this.saveToLocalStorage();\n  }\n\n  get<T>(key: string, type: keyof typeof this.cacheConfigs, language: string, params?: Record<string, any>): { data: T | null; isStale: boolean; isExpired: boolean } {\n    const cacheKey = this.generateKey(key, language, params);\n    const item = this.cache.get(cacheKey) as CacheItem<T> | undefined;\n    const config = this.cacheConfigs[type];\n\n    if (!item) {\n      return { data: null, isStale: true, isExpired: true };\n    }\n\n    const isExpired = this.isExpired(item, config);\n    const isStale = this.isStale(item, config);\n\n    if (isExpired) {\n      this.cache.delete(cacheKey);\n      this.saveToLocalStorage();\n      return { data: null, isStale: true, isExpired: true };\n    }\n\n    return { data: item.data, isStale, isExpired };\n  }\n\n  // Get fresh cached data immediately without stale checks for instant loading\n  getImmediate<T>(key: string, type: keyof typeof this.cacheConfigs, language: string, params?: Record<string, any>): T | null {\n    const cacheKey = this.generateKey(key, language, params);\n    const item = this.cache.get(cacheKey) as CacheItem<T> | undefined;\n    const config = this.cacheConfigs[type];\n\n    if (!item) {\n      return null;\n    }\n\n    const isExpired = this.isExpired(item, config);\n    if (isExpired) {\n      this.cache.delete(cacheKey);\n      this.saveToLocalStorage();\n      return null;\n    }\n\n    return item.data;\n  }\n\n  invalidate(pattern?: string, language?: string): void {\n    if (!pattern) {\n      this.cache.clear();\n    } else {\n      const keysToDelete: string[] = [];\n      for (const key of this.cache.keys()) {\n        if (key.includes(pattern) && (!language || key.includes(language))) {\n          keysToDelete.push(key);\n        }\n      }\n      keysToDelete.forEach(key => this.cache.delete(key));\n    }\n    this.saveToLocalStorage();\n  }\n\n  // Clean up expired items\n  cleanup(): void {\n    if (!this.isClient) return;\n    \n    const now = Date.now();\n    const keysToDelete: string[] = [];\n\n    for (const [key, item] of this.cache.entries()) {\n      if (now > item.expiryTime) {\n        keysToDelete.push(key);\n      }\n    }\n\n    keysToDelete.forEach(key => this.cache.delete(key));\n    this.saveToLocalStorage();\n  }\n\n  // Get cache statistics\n  getStats() {\n    return {\n      size: this.cache.size,\n      isOnline: this.isOnline,\n      entries: Array.from(this.cache.entries()).map(([key, item]) => ({\n        key,\n        language: item.language,\n        age: Date.now() - item.timestamp,\n        expiresIn: item.expiryTime - Date.now(),\n      })),\n    };\n  }\n}\n\n// Singleton instance\nexport const cache = AppCache.getInstance();\n\n// Utility function for cache-aware API calls with instant cached data return\nexport async function cachedApiCall<T>(\n  key: string,\n  type: keyof AppCache['cacheConfigs'],\n  language: string,\n  fetcher: () => Promise<T>,\n  params?: Record<string, any>\n): Promise<T> {\n  const cacheInstance = AppCache.getInstance();\n  \n  // First try to get immediate cached data (even if stale)\n  const immediateData = cacheInstance.getImmediate<T>(key, type, language, params);\n  \n  // If we have cached data and we're offline, return it immediately\n  if (immediateData && cacheInstance.isOffline()) {\n    return immediateData;\n  }\n\n  // Check if we have fresh cached data\n  const cached = cacheInstance.get<T>(key, type, language, params);\n  if (cached.data && !cached.isStale) {\n    return cached.data;\n  }\n\n  try {\n    // Fetch fresh data\n    const freshData = await fetcher();\n    cacheInstance.set(key, freshData, type, language, params);\n    return freshData;\n  } catch (error) {\n    // If fetch fails and we have any cached data (including stale), return it\n    if (immediateData) {\n      console.warn(`API call failed, returning cached data for ${key}:`, error);\n      return immediateData;\n    }\n    throw error;\n  }\n}\n\n// New function for instant cache-first loading with background refresh\nexport function getCachedDataInstant<T>(\n  key: string,\n  type: keyof AppCache['cacheConfigs'],\n  language: string,\n  params?: Record<string, any>\n): T | null {\n  const cacheInstance = AppCache.getInstance();\n  return cacheInstance.getImmediate<T>(key, type, language, params);\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 326, "column": 0}, "map": {"version":3,"sources":["file:///Users/awis/Downloads/%D9%81%D9%82%D8%B7%20%D9%84%D8%AA%D8%AC%D8%B1%D8%A8%D8%A9%20%D8%A7%D9%84%D8%AF%D9%81%D8%B9%20%D9%88%D8%A8%D8%B9%D8%AF%D9%87%D8%A7%20%D9%84%D9%84%D9%85%D8%B3%D8%ADs/seller-frontend/src/utils/api.ts"],"sourcesContent":["import { cachedApiCall } from '@/lib/cache';\nimport { resilientAPI } from '@/lib/resilient-api';\n\nconst BASE_URL = 'https://awisapp.com/api/v1';\n\n// ⭐ CENTRALIZED SELLER CONFIGURATION ⭐\n// To use this project for a different seller, only change the SELLER_ID here\n// This single change will update all seller-related API calls throughout the project\nexport const SELLER_ID = process.env.NEXT_PUBLIC_SELLER_ID || process.env.SELLER_ID || '1';\n\n// Helper function to get current language\nfunction getCurrentLanguage(): string {\n  if (typeof window !== 'undefined') {\n    return localStorage.getItem('language') || 'ar';\n  }\n  return 'ar';\n}\n\nexport function getHeaders(): HeadersInit {\n  const language = getCurrentLanguage();\n  // Map frontend language to backend language code\n  const backendLang = language === 'ar' ? 'kw' : 'en';\n  return {\n    'Content-Type': 'application/json',\n    'Accept-Language': language,\n    'X-Language': language,\n    'lang': backendLang, // Add the lang header that backend expects\n  };\n}\n\n// Fetch guest_id from backend and store in localStorage if not present\nexport async function getOrCreateGuestId(forceNew = false): Promise<string> {\n  if (typeof window !== 'undefined') {\n    if (!forceNew) {\n      let guestId = localStorage.getItem('guest_id');\n      if (guestId) return guestId;\n    }\n    // Always get a new guest_id if forceNew or missing\n    const res = await fetch('https://awisapp.com/api/v1/get-guest-id', {\n      headers: getHeaders(),\n    });\n    const data = await res.json();\n    if (data.guest_id) {\n      localStorage.setItem('guest_id', data.guest_id.toString());\n      return data.guest_id.toString();\n    }\n    throw new Error('No guest_id in backend response');\n  }\n  throw new Error('Not running in browser');\n}\n\nexport async function getSellerInfo() {\n  const language = getCurrentLanguage();\n  return cachedApiCall(\n    'seller',\n    'seller',\n    language,\n    async () => {\n      const res = await fetch(`${BASE_URL}/seller?seller_id=${SELLER_ID}`, {\n        headers: getHeaders(),\n        next: { revalidate: 60 },\n      });\n      if (!res.ok) throw new Error('Failed to fetch seller info');\n      return res.json();\n    }\n  );\n}\n\nexport async function getSellerCategories() {\n  const language = getCurrentLanguage();\n  return cachedApiCall(\n    'categories',\n    'categories',\n    language,\n    async () => {\n      const guestId = await getOrCreateGuestId();\n      const res = await fetch(`${BASE_URL}/categories?seller_id=${SELLER_ID}&guest_id=${guestId}`, {\n        headers: getHeaders(),\n        next: { revalidate: 60 },\n      });\n      if (!res.ok) throw new Error('Failed to fetch seller categories');\n      return res.json();\n    }\n  );\n}\n\nexport async function getSellerProducts(params: Record<string, string> = {}) {\n  const language = getCurrentLanguage();\n  return cachedApiCall(\n    'products',\n    'products',\n    language,\n    async () => {\n      const guestId = await getOrCreateGuestId();\n      const query = new URLSearchParams({ \n        guest_id: guestId, \n        limit: params.limit || '20', \n        offset: params.offset || '1',\n        ...params \n      }).toString();\n      // Use the correct seller-specific endpoint\n      const res = await fetch(`${BASE_URL}/seller/${SELLER_ID}/products?${query}`, {\n        headers: getHeaders(),\n        next: { revalidate: 60 },\n      });\n      if (!res.ok) throw new Error('Failed to fetch products');\n      const data = await res.json();\n      return data;\n    },\n    params\n  );\n}\n\nexport async function getSellerBanners() {\n  const language = getCurrentLanguage();\n  return cachedApiCall(\n    'banners',\n    'static',\n    language,\n    async () => {\n      const res = await fetch(`${BASE_URL}/banners`, {\n        headers: getHeaders(),\n        next: { revalidate: 60 },\n      });\n      if (!res.ok) throw new Error('Failed to fetch banners');\n      return res.json();\n    }\n  );\n}\n\n// Fetch configuration data (currency, settings, etc.)\nexport async function getConfig() {\n  const language = getCurrentLanguage();\n  return cachedApiCall(\n    'config',\n    'config',\n    language,\n    async () => {\n      const res = await fetch(`${BASE_URL}/config`, {\n        headers: getHeaders(),\n        next: { revalidate: 60 },\n      });\n      if (!res.ok) throw new Error('Failed to fetch config');\n      return res.json();\n    }\n  );\n}\n\n// Cache individual product details\nexport async function getProductDetails(slug: string, guestId?: string) {\n  const language = getCurrentLanguage();\n  return cachedApiCall(\n    `product_${slug}`,\n    'product',\n    language,\n    async () => {\n      const actualGuestId = guestId || await getOrCreateGuestId();\n      const apiUrl = `https://awisapp.com/api/v1/products/details/${slug}?guest_id=${actualGuestId}`;\n      const res = await fetch(apiUrl, {\n        headers: getHeaders(),\n      });\n      let raw = await res.text();\n      let parsed: any = {};\n      try { parsed = JSON.parse(raw); } catch (e) { parsed = { error: 'Invalid JSON', raw }; }\n      return parsed;\n    }\n  );\n}\n\n// Cart API functions - Fixed to match Flutter app exactly\nexport async function addToCart(productId: number, quantity: number = 1, selectedColor?: string, selectedOptions?: { [key: string]: string }, selectedVariant?: any) {\n  const guestId = await getOrCreateGuestId();\n  const data: any = {\n    id: productId,\n    guest_id: guestId,\n    quantity: quantity,\n    buy_now: 0,\n  };\n  if (selectedVariant) {\n    data.variant = selectedVariant.type;\n    data.price = selectedVariant.price;\n    data.sku = selectedVariant.sku;\n    data.qty = selectedVariant.qty;\n  }\n  // Send color as color code if available\n  if (selectedColor) {\n    // If selectedColor is a color name, try to find the code from selectedVariant or selectedOptions\n    if (selectedVariant && selectedVariant.color_code) {\n      data.color = selectedVariant.color_code;\n    } else {\n      data.color = selectedColor;\n    }\n  }\n  // Flatten choices: send each as choice_1, choice_2, etc.\n  if (selectedOptions) {\n    let idx = 1;\n    for (const [key, value] of Object.entries(selectedOptions)) {\n      data[`choice_${idx}`] = value;\n      idx++;\n    }\n  }\n\n  const res = await fetch(`${BASE_URL}/cart/add`, {\n    method: 'POST',\n    headers: getHeaders(),\n    body: JSON.stringify(data),\n  });\n\n  if (!res.ok) {\n    const errorText = await res.text();\n    throw new Error(`Failed to add to cart: ${res.status} ${errorText}`);\n  }\n  \n  const result = await res.json();\n  return result;\n}\n\nexport async function getCart() {\n  const guestId = await getOrCreateGuestId();\n  const res = await fetch(`${BASE_URL}/cart?guest_id=${guestId}`, {\n    headers: getHeaders(),\n  });\n  if (!res.ok) {\n    const errorText = await res.text();\n    throw new Error(`Failed to fetch cart: ${res.status} ${errorText}`);\n  }\n  const result = await res.json();\n  return result;\n}\n\nexport async function updateCartQuantity(cartId: number, quantity: number) {\n  const guestId = await getOrCreateGuestId();\n  \n  const data = {\n    _method: 'put',\n    key: cartId,\n    quantity: quantity,\n    guest_id: guestId,\n  };\n\n  const res = await fetch(`${BASE_URL}/cart/update`, {\n    method: 'POST',\n    headers: getHeaders(),\n    body: JSON.stringify(data),\n  });\n\n  if (!res.ok) {\n    const errorText = await res.text();\n    throw new Error(`Failed to update cart: ${res.status} ${errorText}`);\n  }\n  \n  const result = await res.json();\n  return result;\n}\n\nexport async function removeFromCart(cartId: number) {\n  const guestId = await getOrCreateGuestId();\n  const data = {\n    _method: 'delete',\n    guest_id: guestId,\n    key: cartId,\n  };\n\n  const res = await fetch(`${BASE_URL}/cart/remove`, {\n    method: 'POST',\n    headers: getHeaders(),\n    body: JSON.stringify(data),\n  });\n\n  if (!res.ok) {\n    const errorText = await res.text();\n    throw new Error(`Failed to remove from cart: ${res.status} ${errorText}`);\n  }\n\n  const result = await res.json();\n  return result;\n}\n\n// Format price according to Flutter app logic with language-aware currency symbols\nexport function formatPrice(price: number, config: any, language: string = 'ar'): string {\n  if (!price || price <= 0) return '';\n  // If config or currency_list is missing, don't try to convert or show a price\n  if (!config || !config.currency_list) {\n    return '';\n  }\n  try {\n    // Get currency symbol from config, default to KD\n    let currencySymbol = 'KD';\n    let decimalPoints = 2;\n    let convertedPrice = price;\n    \n    if (config) {\n      // Find the active currency (status: true)\n      const activeCurrency = config.currency_list?.find((curr: any) => curr.status === true);\n      // Find the USD currency (status: false, code: USD)\n      const usdCurrency = config.currency_list?.find((curr: any) => curr.status === false && curr.code === 'USD');\n      \n      if (activeCurrency) {\n        currencySymbol = activeCurrency.symbol || 'KD';\n        const activeRate = parseFloat(activeCurrency.exchange_rate) || 1;\n        const usdRate = parseFloat(usdCurrency?.exchange_rate) || 1;\n        \n        // Apply currency conversion: price * activeRate * (1 / usdRate)\n        // This matches the Flutter app's conversion logic\n        convertedPrice = price * activeRate * (1 / usdRate);\n      }\n      \n      // Get decimal point settings\n      decimalPoints = config.decimal_point_settings || 2;\n    }\n    \n    // Format price with proper decimal places and commas\n    const formattedPrice = convertedPrice.toFixed(decimalPoints);\n    const priceWithCommas = formattedPrice.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n    \n    // Display currency symbol based on language direction\n    // For Arabic (RTL): \"دك\" after price, for English (LTR): \"KD\" before price\n    const isRTL = language === 'ar';\n    const displaySymbol = isRTL ? 'دك' : 'KD';\n    \n    // Format based on language direction\n    if (isRTL) {\n      // Arabic: price دك (symbol after price)\n      return `${priceWithCommas} ${displaySymbol}`;\n    } else {\n      // English: KD price (symbol before price)\n      return `${displaySymbol} ${priceWithCommas}`;\n    }\n  } catch (error) {\n    console.error('Error formatting price:', error);\n    const isRTL = language === 'ar';\n    const displaySymbol = isRTL ? 'دك' : 'KD';\n    \n    if (isRTL) {\n      return `${price.toFixed(2)} ${displaySymbol}`;\n    } else {\n      return `${displaySymbol} ${price.toFixed(2)}`;\n    }\n  }\n}\n\n// Add more API helpers as needed (categories, reviews, etc.)\n\nexport interface PlaceOrderCartItem {\n  product_id: number;\n  quantity: number;\n  variant?: string;\n  color?: string;\n}\n\nexport interface PlaceOrderParams {\n  address_id: number | string;\n  delivery: string;\n  payment: string;\n  order_note: string;\n  cartItems: any[];\n  guest_id: number | string;\n  country: string;\n  city: string;\n  postal: string;\n  phone: string;\n  name: string;\n  address?: string;\n  email?: string;\n  shipping_cost?: number;\n}\n\nexport async function placeOrder(params: PlaceOrderParams) {\n  let { guest_id, cartItems, shipping_cost, ...rest } = params;\n  // Fallback for guest_id\n  if (!guest_id || isNaN(Number(guest_id))) {\n    guest_id = typeof window !== 'undefined' ? (localStorage.getItem('guest_id') || '1') : '1';\n  }\n  const query = new URLSearchParams({\n    ...Object.fromEntries(Object.entries(rest).map(([k, v]) => [k, v?.toString() ?? ''])),\n    cartItems: JSON.stringify(cartItems),\n    guest_id: guest_id.toString(),\n    is_guest: '1',\n    ...(shipping_cost !== undefined ? { shipping_cost: shipping_cost.toString() } : {}),\n  }).toString();\n  const res = await fetch(`https://awisapp.com/api/v1/customer/order/place?${query}`, {\n    headers: getHeaders(),\n  });\n  if (!res.ok) throw new Error('Failed to place order');\n  return await res.json();\n}\n\nexport interface AddAddressParams {\n  name: string;\n  phone: string;\n  email: string;\n  country: string;\n  city: string;\n  postal: string;\n  address: string;\n  address_type: string;\n  guest_id: number | string;\n  contact_person_name?: string;\n  zip?: string;\n  latitude?: string;\n  longitude?: string;\n  is_billing?: number;\n}\n\nexport async function addAddress(params: any) {\n  let guestId = params.guest_id;\n  if (!guestId) {\n    guestId = await getOrCreateGuestId();\n  }\n  // Ensure latitude and longitude are always present and numbers\n  let latitude = params.latitude;\n  let longitude = params.longitude;\n  if (latitude === undefined || latitude === null || latitude === \"\") latitude = 0;\n  if (longitude === undefined || longitude === null || longitude === \"\") longitude = 0;\n  let body = {\n    contact_person_name: params.name,\n    address_type: params.address_type || 'home',\n    address: params.address,\n    city: params.city,\n    zip: params.postal || params.zip,\n    phone: params.phone,\n    state: params.state || '',\n    country: params.country,\n    latitude: latitude,\n    longitude: longitude,\n    is_billing: false,\n    guest_id: guestId.toString(),\n    email: params.email || '',\n    is_guest: 1,\n  };\n  let res = await fetch('https://awisapp.com/api/v1/customer/address/add', {\n    method: 'POST',\n    headers: getHeaders(),\n    body: JSON.stringify(body),\n  });\n  if (!res.ok) throw new Error('Failed to add address');\n  return await res.json();\n}\n\nexport async function getAddressList(guest_id: number | string) {\n  const res = await fetch(`https://awisapp.com/api/v1/customer/address/list?guest_id=${encodeURIComponent(guest_id.toString())}`, {\n    headers: getHeaders(),\n  });\n  if (!res.ok) throw new Error('Failed to fetch address list');\n  const data = await res.json();\n  // Flutter expects a plain array, not wrapped in addresses/data\n  return Array.isArray(data) ? data : (data.addresses || data.data || []);\n}\n\nexport function getSellerInfoFromCart(cartItems: any[]) {\n  if (!cartItems || cartItems.length === 0) return { sellerId: SELLER_ID, sellerType: 'admin' };\n  const first = cartItems[0];\n  return {\n    sellerId: first.seller_id || first.sellerId || SELLER_ID,\n    sellerType: first.seller_is || first.sellerIs || 'admin',\n  };\n}\n\nexport async function getShippingMethods(_sellerId: string | number, _sellerType: string, guestId: string | number) {\n  // Always fetch admin/global shipping methods only\n  const res = await fetch(`https://awisapp.com/api/v1/shipping-method/by-seller/${SELLER_ID}/admin?guest_id=${guestId}`, {\n    headers: getHeaders(),\n  });\n  const data = await res.json();\n  const options = Array.isArray(data) ? data : (data.shipping_methods || data.data || []);\n  return options;\n}\n\nexport async function chooseShippingMethod(shippingMethodId: number | string, guestId: number | string, cartGroupId: string = 'default') {\n  const body = {\n    id: shippingMethodId,\n    guest_id: guestId,\n    cart_group_id: cartGroupId,\n  };\n  const res = await fetch('https://awisapp.com/api/v1/shipping-method/choose-for-order', {\n    method: 'POST',\n    headers: getHeaders(),\n    body: JSON.stringify(body),\n  });\n  if (!res.ok) throw new Error('Failed to choose shipping method');\n  return await res.json();\n}\n\nexport interface DigitalPaymentOrderParams {\n  order_note?: string;\n  customer_id?: string | number;\n  address_id?: string | number;\n  billing_address_id?: string | number;\n  coupon_code?: string;\n  coupon_discount?: string | number;\n  payment_method?: string;\n  is_check_create_account?: boolean;\n  password?: string;\n  payment_platform?: string;\n  payment_request_from?: string;\n}\n\nexport interface DigitalPaymentOrderResponse {\n  redirect_link?: string;\n  [key: string]: any;\n}\n\nexport async function digitalPaymentPlaceOrder(params: DigitalPaymentOrderParams): Promise<DigitalPaymentOrderResponse> {\n  const guest_id = await getOrCreateGuestId();\n  const is_guest = 1;\n  const is_check_create_account = params.is_check_create_account ? 1 : 0;\n  const body = {\n    order_note: params.order_note || '',\n    customer_id: params.customer_id || guest_id,\n    address_id: params.address_id,\n    billing_address_id: params.billing_address_id,\n    coupon_code: params.coupon_code || '',\n    coupon_discount: params.coupon_discount || '',\n    payment_platform: params.payment_platform || 'web',\n    payment_method: params.payment_method,\n    callback: null,\n    payment_request_from: params.payment_request_from || 'web',\n    guest_id: guest_id,\n    is_guest: is_guest,\n    is_check_create_account: is_check_create_account,\n    password: params.password || '',\n  };\n  // POST to the correct API endpoint for digital payment\n  const res = await fetch('https://awisapp.com/api/v1/digital-payment', {\n    method: 'POST',\n    headers: getHeaders(),\n    body: JSON.stringify(body),\n  });\n  if (!res.ok) throw new Error('Failed to place digital payment order');\n  return await res.json();\n}\n\nexport async function setCheckoutSession(address_id: number | string, billing_address_id: number | string) {\n  const res = await fetch('https://awisapp.com/api/v1/set-checkout-session', {\n    method: 'POST',\n    credentials: 'include',\n    headers: getHeaders(),\n    body: JSON.stringify({ address_id, billing_address_id }),\n  });\n  if (!res.ok) throw new Error('Failed to set checkout session');\n  return await res.json();\n}\n\n// Order tracking API function\nexport async function trackOrder(orderId: string, phoneNumber: string) {\n  const data = {\n    order_id: orderId,\n    phone_number: phoneNumber,\n  };\n\n  const res = await fetch(`${BASE_URL}/order/track-order`, {\n    method: 'POST',\n    headers: getHeaders(),\n    body: JSON.stringify(data),\n  });\n\n  if (!res.ok) {\n    const errorText = await res.text();\n    throw new Error(`Failed to track order: ${res.status} ${errorText}`);\n  }\n  \n  const result = await res.json();\n  return result;\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 805, "column": 0}, "map": {"version":3,"sources":["file:///Users/awis/Downloads/%D9%81%D9%82%D8%B7%20%D9%84%D8%AA%D8%AC%D8%B1%D8%A8%D8%A9%20%D8%A7%D9%84%D8%AF%D9%81%D8%B9%20%D9%88%D8%A8%D8%B9%D8%AF%D9%87%D8%A7%20%D9%84%D9%84%D9%85%D8%B3%D8%ADs/seller-frontend/src/components/CartContext.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useContext, useReducer, useEffect, ReactNode } from 'react';\nimport { addToCart, getCart, updateCartQuantity, removeFromCart, getOrCreateGuestId } from '@/utils/api';\n\n// Cart item interface - Updated to match actual API response\nexport interface CartItem {\n  id: number;\n  customer_id: number;\n  cart_group_id: string;\n  product_id: number;\n  product_type: string;\n  digital_product_type: string | null;\n  color: string | null;\n  choices: any[];\n  variations: any[];\n  variant: string;\n  quantity: number;\n  price: number;\n  tax: number;\n  discount: number;\n  tax_model: string;\n  is_checked: number;\n  slug: string;\n  name: string;\n  thumbnail: string;\n  seller_id: number;\n  seller_is: string;\n  created_at: string;\n  updated_at: string;\n  shop_info: string;\n  shipping_cost: number;\n  shipping_type: string;\n  is_guest: number;\n  is_product_available: number;\n  minimum_order_amount_info: number;\n  free_delivery_order_amount: {\n    amount: number;\n    percentage: number;\n    amount_need: number;\n    shipping_cost_saved: number;\n    cart_id: string;\n    status: number;\n    responsibility: string;\n  };\n  shop?: any;\n  product?: any;\n}\n\n// Cart state interface\ninterface CartState {\n  items: CartItem[];\n  loading: boolean;\n  error: string | null;\n  totalItems: number;\n  subtotal: number;\n  total: number;\n}\n\n// Cart action types\ntype CartAction =\n  | { type: 'SET_LOADING'; payload: boolean }\n  | { type: 'SET_ERROR'; payload: string | null }\n  | { type: 'SET_CART'; payload: CartItem[] }\n  | { type: 'ADD_ITEM'; payload: CartItem }\n  | { type: 'UPDATE_ITEM'; payload: { id: number; quantity: number } }\n  | { type: 'REMOVE_ITEM'; payload: number }\n  | { type: 'CLEAR_CART' }\n  | { type: 'UPDATE_TOTALS' };\n\n// Initial state\nconst initialState: CartState = {\n  items: [],\n  loading: false,\n  error: null,\n  totalItems: 0,\n  subtotal: 0,\n  total: 0,\n};\n\n// Cart reducer\nfunction cartReducer(state: CartState, action: CartAction): CartState {\n  switch (action.type) {\n    case 'SET_LOADING':\n      return { ...state, loading: action.payload };\n    \n    case 'SET_ERROR':\n      return { ...state, error: action.payload };\n    \n    case 'SET_CART':\n      return {\n        ...state,\n        items: action.payload,\n        totalItems: action.payload.reduce((sum, item) => sum + item.quantity, 0),\n        subtotal: action.payload.reduce((sum, item) => sum + (item.price - item.discount) * item.quantity, 0),\n        total: action.payload.reduce((sum, item) => sum + (item.price - item.discount) * item.quantity, 0),\n      };\n    \n    case 'ADD_ITEM':\n      // Check for existing item with same product_id, variant, and color\n      const existingItem = state.items.find(item => {\n        const itemVariant = item.variant || '';\n        const payloadVariant = action.payload.variant || '';\n        const itemColor = item.color || '';\n        const payloadColor = action.payload.color || '';\n        \n        const matches = item.product_id === action.payload.product_id && \n                       itemVariant === payloadVariant && \n                       itemColor === payloadColor;\n        \n\n        \n        return matches;\n      });\n      \n\n      \n      if (existingItem) {\n        // Update quantity of existing item\n        const updatedItems = state.items.map(item =>\n          item.product_id === action.payload.product_id &&\n          item.variant === action.payload.variant &&\n          item.color === action.payload.color\n            ? { ...item, quantity: item.quantity + action.payload.quantity }\n            : item\n        );\n        return {\n          ...state,\n          items: updatedItems,\n          totalItems: updatedItems.reduce((sum, item) => sum + item.quantity, 0),\n          subtotal: updatedItems.reduce((sum, item) => sum + (item.price - item.discount) * item.quantity, 0),\n          total: updatedItems.reduce((sum, item) => sum + (item.price - item.discount) * item.quantity, 0),\n        };\n      } else {\n        // Add new item\n        const newItems = [...state.items, action.payload];\n        return {\n          ...state,\n          items: newItems,\n          totalItems: newItems.reduce((sum, item) => sum + item.quantity, 0),\n          subtotal: newItems.reduce((sum, item) => sum + (item.price - item.discount) * item.quantity, 0),\n          total: newItems.reduce((sum, item) => sum + (item.price - item.discount) * item.quantity, 0),\n        };\n      }\n    \n    case 'UPDATE_ITEM':\n      const updatedItems = state.items.map(item =>\n        item.id === action.payload.id\n          ? { ...item, quantity: action.payload.quantity }\n          : item\n      );\n      return {\n        ...state,\n        items: updatedItems,\n        totalItems: updatedItems.reduce((sum, item) => sum + item.quantity, 0),\n        subtotal: updatedItems.reduce((sum, item) => sum + (item.price - item.discount) * item.quantity, 0),\n        total: updatedItems.reduce((sum, item) => sum + (item.price - item.discount) * item.quantity, 0),\n      };\n    \n    case 'REMOVE_ITEM':\n      const filteredItems = state.items.filter(item => item.id !== action.payload);\n      return {\n        ...state,\n        items: filteredItems,\n        totalItems: filteredItems.reduce((sum, item) => sum + item.quantity, 0),\n        subtotal: filteredItems.reduce((sum, item) => sum + (item.price - item.discount) * item.quantity, 0),\n        total: filteredItems.reduce((sum, item) => sum + (item.price - item.discount) * item.quantity, 0),\n      };\n    \n    case 'CLEAR_CART':\n      return {\n        ...state,\n        items: [],\n        totalItems: 0,\n        subtotal: 0,\n        total: 0,\n      };\n    \n    case 'UPDATE_TOTALS':\n      return {\n        ...state,\n        totalItems: state.items.reduce((sum, item) => sum + item.quantity, 0),\n        subtotal: state.items.reduce((sum, item) => sum + (item.price - item.discount) * item.quantity, 0),\n        total: state.items.reduce((sum, item) => sum + (item.price - item.discount) * item.quantity, 0),\n      };\n    \n    default:\n      return state;\n  }\n}\n\n// Cart context\ninterface CartContextType {\n  state: CartState;\n  addToCart: (productId: number, quantity?: number, selectedColor?: string, selectedOptions?: { [key: string]: string }, selectedVariant?: any) => Promise<void>;\n  updateQuantity: (cartId: number, quantity: number) => Promise<void>;\n  removeFromCart: (cartId: number) => Promise<void>;\n  clearCart: () => void;\n  loadCart: () => Promise<void>;\n  clearCartAndGuestId: () => void;\n}\n\nconst CartContext = createContext<CartContextType | undefined>(undefined);\n\n// Cart provider component\nexport function CartProvider({ children }: { children: ReactNode }) {\n  const [state, dispatch] = useReducer(cartReducer, initialState);\n  const [errorToast, setErrorToast] = React.useState<string | null>(null);\n  const [successToast, setSuccessToast] = React.useState<string | null>(null);\n  const [isMounted, setIsMounted] = React.useState(false);\n\n  // Ensure component is mounted on client side\n  useEffect(() => {\n    setIsMounted(true);\n  }, []);\n\n  // Clear cart and guest_id if no guest_id is found (new session/private window)\n  useEffect(() => {\n    if (isMounted && typeof window !== 'undefined') {\n      const guestId = localStorage.getItem('guest_id');\n      if (!guestId) {\n        localStorage.removeItem('guest_id');\n        dispatch({ type: 'CLEAR_CART' });\n      }\n    }\n  }, [isMounted]);\n\n  // Load cart on mount\n  useEffect(() => {\n    if (isMounted) {\n      loadCart();\n    }\n  }, [isMounted]);\n\n  // Check for payment success and clear cart\n  useEffect(() => {\n    if (isMounted && typeof window !== 'undefined') {\n      const urlParams = new URLSearchParams(window.location.search);\n      const paymentSuccess = urlParams.get('flag') === 'success';\n      const paymentToken = urlParams.get('token');\n      const paymentStatus = urlParams.get('status');\n      const paymentId = urlParams.get('payment_id');\n      \n      // Check for various payment success indicators\n      const isPaymentSuccess = (\n        (paymentSuccess && paymentToken) ||\n        (paymentStatus === 'success') ||\n        (paymentStatus === 'paid') ||\n        (paymentId && paymentSuccess)\n      );\n      \n              if (isPaymentSuccess) {\n        dispatch({ type: 'CLEAR_CART' });\n        \n        // Remove all payment-related parameters from URL without reloading\n        const newUrl = new URL(window.location.href);\n        newUrl.searchParams.delete('flag');\n        newUrl.searchParams.delete('token');\n        newUrl.searchParams.delete('status');\n        newUrl.searchParams.delete('payment_id');\n        window.history.replaceState({}, '', newUrl.toString());\n        \n        // Show success message\n        setSuccessToast('تم الدفع بنجاح! تم مسح السلة.');\n        \n        // Auto-hide success toast after 5 seconds\n        setTimeout(() => {\n          setSuccessToast(null);\n        }, 5000);\n      }\n    }\n  }, [isMounted]);\n\n  // Additional check: Clear cart when user returns to home page after payment\n  useEffect(() => {\n    if (isMounted && typeof window !== 'undefined') {\n      const isHomePage = window.location.pathname === '/' || window.location.pathname === '';\n      const hasRecentPayment = sessionStorage.getItem('recent_payment_attempt');\n      \n      if (isHomePage && hasRecentPayment) {\n        dispatch({ type: 'CLEAR_CART' });\n        sessionStorage.removeItem('recent_payment_attempt');\n        \n        // Show success message\n        setSuccessToast('تم الدفع بنجاح! تم مسح السلة.');\n        setTimeout(() => {\n          setSuccessToast(null);\n        }, 5000);\n      }\n    }\n  }, [isMounted]);\n\n  const loadCart = async () => {\n    try {\n      dispatch({ type: 'SET_LOADING', payload: true });\n      dispatch({ type: 'SET_ERROR', payload: null });\n      \n      const response = await getCart();\n      \n      // Handle different possible response structures\n      let cartItems: CartItem[] = [];\n      \n      if (Array.isArray(response)) {\n        // Direct array response (actual API structure)\n        cartItems = response;\n      } else if (response.cart && Array.isArray(response.cart)) {\n        cartItems = response.cart;\n      } else if (response.items && Array.isArray(response.items)) {\n        cartItems = response.items;\n      } else if (response.data && Array.isArray(response.data)) {\n        cartItems = response.data;\n      } else {\n        cartItems = [];\n      }\n      \n      dispatch({ type: 'SET_CART', payload: cartItems });\n    } catch (error) {\n      console.error('Failed to load cart:', error);\n      dispatch({ type: 'SET_ERROR', payload: 'Failed to load cart' });\n    } finally {\n      dispatch({ type: 'SET_LOADING', payload: false });\n    }\n  };\n\n  const addToCartHandler = async (productId: number, quantity: number = 1, selectedColor?: string, selectedOptions?: { [key: string]: string }, selectedVariant?: any) => {\n    try {\n      dispatch({ type: 'SET_LOADING', payload: true });\n      dispatch({ type: 'SET_ERROR', payload: null });\n      \n\n      \n      const guest_id = await getOrCreateGuestId();\n      \n      // Check if product already exists in cart with same variant and color\n      const existingItem = state.items.find(item => {\n        const itemVariant = item.variant || '';\n        const requestVariant = selectedVariant?.type || '';\n        const itemColor = item.color || '';\n        const requestColor = selectedColor || '';\n        \n\n        \n        return item.product_id === productId && itemVariant === requestVariant && itemColor === requestColor;\n      });\n      \n      if (existingItem) {\n        // Update existing item quantity on server first\n        const newQuantity = existingItem.quantity + quantity;\n        await updateCartQuantity(existingItem.id, newQuantity);\n        \n        // Only update local state after successful API call\n        dispatch({ type: 'UPDATE_ITEM', payload: { id: existingItem.id, quantity: newQuantity } });\n      } else {\n        // Add new item to server first\n        const result = await addToCart(productId, quantity, selectedColor, selectedOptions, selectedVariant);\n        \n        // Reload cart from server to get the complete item data and update local state\n        await loadCart();\n      }\n    } catch (error) {\n      console.error('Failed to add to cart:', error);\n      dispatch({ type: 'SET_ERROR', payload: 'Failed to add to cart' });\n      setErrorToast('Failed to add to cart');\n      throw error;\n    } finally {\n      dispatch({ type: 'SET_LOADING', payload: false });\n    }\n  };\n\n  const updateQuantityHandler = async (cartId: number, quantity: number) => {\n    // Find the item and store previous quantity\n    const prevItem = state.items.find((item) => item.id === cartId);\n    if (!prevItem) return;\n    const prevQuantity = prevItem.quantity;\n    \n    try {\n      dispatch({ type: 'SET_ERROR', payload: null });\n      const guest_id = await getOrCreateGuestId();\n      await updateCartQuantity(cartId, quantity);\n      \n      // Only update local state after successful API call\n      dispatch({ type: 'UPDATE_ITEM', payload: { id: cartId, quantity } });\n    } catch (error) {\n      dispatch({ type: 'SET_ERROR', payload: 'Failed to update quantity' });\n      setErrorToast('Failed to update quantity');\n      throw error;\n    }\n  };\n\n  const removeFromCartHandler = async (cartId: number) => {\n    // Find the item and store previous state\n    const prevItem = state.items.find((item) => item.id === cartId);\n    if (!prevItem) return;\n    \n    try {\n      dispatch({ type: 'SET_ERROR', payload: null });\n      const guest_id = await getOrCreateGuestId();\n      await removeFromCart(cartId);\n      \n      // Only update local state after successful API call\n      dispatch({ type: 'REMOVE_ITEM', payload: cartId });\n    } catch (error) {\n      dispatch({ type: 'SET_ERROR', payload: 'Failed to remove from cart' });\n      setErrorToast('Failed to remove from cart');\n      throw error;\n    }\n  };\n\n  const clearCart = () => {\n    dispatch({ type: 'CLEAR_CART' });\n  };\n\n  // Add a function to clear cart and guest_id (for logout or new session)\n  const clearCartAndGuestId = () => {\n    if (typeof window !== 'undefined') {\n      localStorage.removeItem('guest_id');\n    }\n    dispatch({ type: 'CLEAR_CART' });\n  };\n\n  const value: CartContextType = {\n    state,\n    addToCart: addToCartHandler,\n    updateQuantity: updateQuantityHandler,\n    removeFromCart: removeFromCartHandler,\n    clearCart,\n    loadCart,\n    // Expose clearCartAndGuestId for use in logout/session reset\n    clearCartAndGuestId,\n  };\n\n  return (\n    <CartContext.Provider value={value}>\n      {children}\n      {errorToast && (\n        <div className=\"fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-red-600 text-white px-4 py-2 rounded shadow z-50\">\n          {errorToast}\n          <button className=\"ml-2\" onClick={() => setErrorToast(null)}>&times;</button>\n        </div>\n      )}\n      {successToast && (\n        <div className=\"fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-green-600 text-white px-4 py-2 rounded shadow z-50\">\n          {successToast}\n          <button className=\"ml-2\" onClick={() => setSuccessToast(null)}>&times;</button>\n        </div>\n      )}\n    </CartContext.Provider>\n  );\n}\n\n// Custom hook to use cart context\nexport function useCart() {\n  const context = useContext(CartContext);\n  if (context === undefined) {\n    throw new Error('useCart must be used within a CartProvider');\n  }\n  return context;\n} "],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAsEA,gBAAgB;AAChB,MAAM,eAA0B;IAC9B,OAAO,EAAE;IACT,SAAS;IACT,OAAO;IACP,YAAY;IACZ,UAAU;IACV,OAAO;AACT;AAEA,eAAe;AACf,SAAS,YAAY,KAAgB,EAAE,MAAkB;IACvD,OAAQ,OAAO,IAAI;QACjB,KAAK;YACH,OAAO;gBAAE,GAAG,KAAK;gBAAE,SAAS,OAAO,OAAO;YAAC;QAE7C,KAAK;YACH,OAAO;gBAAE,GAAG,KAAK;gBAAE,OAAO,OAAO,OAAO;YAAC;QAE3C,KAAK;YACH,OAAO;gBACL,GAAG,KAAK;gBACR,OAAO,OAAO,OAAO;gBACrB,YAAY,OAAO,OAAO,CAAC,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,KAAK,QAAQ,EAAE;gBACtE,UAAU,OAAO,OAAO,CAAC,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,CAAC,KAAK,KAAK,GAAG,KAAK,QAAQ,IAAI,KAAK,QAAQ,EAAE;gBACnG,OAAO,OAAO,OAAO,CAAC,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,CAAC,KAAK,KAAK,GAAG,KAAK,QAAQ,IAAI,KAAK,QAAQ,EAAE;YAClG;QAEF,KAAK;YACH,mEAAmE;YACnE,MAAM,eAAe,MAAM,KAAK,CAAC,IAAI,CAAC,CAAA;gBACpC,MAAM,cAAc,KAAK,OAAO,IAAI;gBACpC,MAAM,iBAAiB,OAAO,OAAO,CAAC,OAAO,IAAI;gBACjD,MAAM,YAAY,KAAK,KAAK,IAAI;gBAChC,MAAM,eAAe,OAAO,OAAO,CAAC,KAAK,IAAI;gBAE7C,MAAM,UAAU,KAAK,UAAU,KAAK,OAAO,OAAO,CAAC,UAAU,IAC9C,gBAAgB,kBAChB,cAAc;gBAI7B,OAAO;YACT;YAIA,IAAI,cAAc;gBAChB,mCAAmC;gBACnC,MAAM,eAAe,MAAM,KAAK,CAAC,GAAG,CAAC,CAAA,OACnC,KAAK,UAAU,KAAK,OAAO,OAAO,CAAC,UAAU,IAC7C,KAAK,OAAO,KAAK,OAAO,OAAO,CAAC,OAAO,IACvC,KAAK,KAAK,KAAK,OAAO,OAAO,CAAC,KAAK,GAC/B;wBAAE,GAAG,IAAI;wBAAE,UAAU,KAAK,QAAQ,GAAG,OAAO,OAAO,CAAC,QAAQ;oBAAC,IAC7D;gBAEN,OAAO;oBACL,GAAG,KAAK;oBACR,OAAO;oBACP,YAAY,aAAa,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,KAAK,QAAQ,EAAE;oBACpE,UAAU,aAAa,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,CAAC,KAAK,KAAK,GAAG,KAAK,QAAQ,IAAI,KAAK,QAAQ,EAAE;oBACjG,OAAO,aAAa,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,CAAC,KAAK,KAAK,GAAG,KAAK,QAAQ,IAAI,KAAK,QAAQ,EAAE;gBAChG;YACF,OAAO;gBACL,eAAe;gBACf,MAAM,WAAW;uBAAI,MAAM,KAAK;oBAAE,OAAO,OAAO;iBAAC;gBACjD,OAAO;oBACL,GAAG,KAAK;oBACR,OAAO;oBACP,YAAY,SAAS,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,KAAK,QAAQ,EAAE;oBAChE,UAAU,SAAS,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,CAAC,KAAK,KAAK,GAAG,KAAK,QAAQ,IAAI,KAAK,QAAQ,EAAE;oBAC7F,OAAO,SAAS,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,CAAC,KAAK,KAAK,GAAG,KAAK,QAAQ,IAAI,KAAK,QAAQ,EAAE;gBAC5F;YACF;QAEF,KAAK;YACH,MAAM,eAAe,MAAM,KAAK,CAAC,GAAG,CAAC,CAAA,OACnC,KAAK,EAAE,KAAK,OAAO,OAAO,CAAC,EAAE,GACzB;oBAAE,GAAG,IAAI;oBAAE,UAAU,OAAO,OAAO,CAAC,QAAQ;gBAAC,IAC7C;YAEN,OAAO;gBACL,GAAG,KAAK;gBACR,OAAO;gBACP,YAAY,aAAa,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,KAAK,QAAQ,EAAE;gBACpE,UAAU,aAAa,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,CAAC,KAAK,KAAK,GAAG,KAAK,QAAQ,IAAI,KAAK,QAAQ,EAAE;gBACjG,OAAO,aAAa,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,CAAC,KAAK,KAAK,GAAG,KAAK,QAAQ,IAAI,KAAK,QAAQ,EAAE;YAChG;QAEF,KAAK;YACH,MAAM,gBAAgB,MAAM,KAAK,CAAC,MAAM,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK,OAAO,OAAO;YAC3E,OAAO;gBACL,GAAG,KAAK;gBACR,OAAO;gBACP,YAAY,cAAc,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,KAAK,QAAQ,EAAE;gBACrE,UAAU,cAAc,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,CAAC,KAAK,KAAK,GAAG,KAAK,QAAQ,IAAI,KAAK,QAAQ,EAAE;gBAClG,OAAO,cAAc,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,CAAC,KAAK,KAAK,GAAG,KAAK,QAAQ,IAAI,KAAK,QAAQ,EAAE;YACjG;QAEF,KAAK;YACH,OAAO;gBACL,GAAG,KAAK;gBACR,OAAO,EAAE;gBACT,YAAY;gBACZ,UAAU;gBACV,OAAO;YACT;QAEF,KAAK;YACH,OAAO;gBACL,GAAG,KAAK;gBACR,YAAY,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,KAAK,QAAQ,EAAE;gBACnE,UAAU,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,CAAC,KAAK,KAAK,GAAG,KAAK,QAAQ,IAAI,KAAK,QAAQ,EAAE;gBAChG,OAAO,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,CAAC,KAAK,KAAK,GAAG,KAAK,QAAQ,IAAI,KAAK,QAAQ,EAAE;YAC/F;QAEF;YACE,OAAO;IACX;AACF;AAaA,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,gBAAa,AAAD,EAA+B;AAGxD,SAAS,aAAa,EAAE,QAAQ,EAA2B;;IAChE,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,aAAU,AAAD,EAAE,aAAa;IAClD,MAAM,CAAC,YAAY,cAAc,GAAG,6JAAA,CAAA,UAAK,CAAC,QAAQ,CAAgB;IAClE,MAAM,CAAC,cAAc,gBAAgB,GAAG,6JAAA,CAAA,UAAK,CAAC,QAAQ,CAAgB;IACtE,MAAM,CAAC,WAAW,aAAa,GAAG,6JAAA,CAAA,UAAK,CAAC,QAAQ,CAAC;IAEjD,6CAA6C;IAC7C,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACR,aAAa;QACf;iCAAG,EAAE;IAEL,+EAA+E;IAC/E,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACR,IAAI,aAAa,aAAkB,aAAa;gBAC9C,MAAM,UAAU,aAAa,OAAO,CAAC;gBACrC,IAAI,CAAC,SAAS;oBACZ,aAAa,UAAU,CAAC;oBACxB,SAAS;wBAAE,MAAM;oBAAa;gBAChC;YACF;QACF;iCAAG;QAAC;KAAU;IAEd,qBAAqB;IACrB,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACR,IAAI,WAAW;gBACb;YACF;QACF;iCAAG;QAAC;KAAU;IAEd,2CAA2C;IAC3C,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACR,IAAI,aAAa,aAAkB,aAAa;gBAC9C,MAAM,YAAY,IAAI,gBAAgB,OAAO,QAAQ,CAAC,MAAM;gBAC5D,MAAM,iBAAiB,UAAU,GAAG,CAAC,YAAY;gBACjD,MAAM,eAAe,UAAU,GAAG,CAAC;gBACnC,MAAM,gBAAgB,UAAU,GAAG,CAAC;gBACpC,MAAM,YAAY,UAAU,GAAG,CAAC;gBAEhC,+CAA+C;gBAC/C,MAAM,mBACJ,AAAC,kBAAkB,gBAClB,kBAAkB,aAClB,kBAAkB,UAClB,aAAa;gBAGR,IAAI,kBAAkB;oBAC5B,SAAS;wBAAE,MAAM;oBAAa;oBAE9B,mEAAmE;oBACnE,MAAM,SAAS,IAAI,IAAI,OAAO,QAAQ,CAAC,IAAI;oBAC3C,OAAO,YAAY,CAAC,MAAM,CAAC;oBAC3B,OAAO,YAAY,CAAC,MAAM,CAAC;oBAC3B,OAAO,YAAY,CAAC,MAAM,CAAC;oBAC3B,OAAO,YAAY,CAAC,MAAM,CAAC;oBAC3B,OAAO,OAAO,CAAC,YAAY,CAAC,CAAC,GAAG,IAAI,OAAO,QAAQ;oBAEnD,uBAAuB;oBACvB,gBAAgB;oBAEhB,0CAA0C;oBAC1C;kDAAW;4BACT,gBAAgB;wBAClB;iDAAG;gBACL;YACF;QACF;iCAAG;QAAC;KAAU;IAEd,4EAA4E;IAC5E,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACR,IAAI,aAAa,aAAkB,aAAa;gBAC9C,MAAM,aAAa,OAAO,QAAQ,CAAC,QAAQ,KAAK,OAAO,OAAO,QAAQ,CAAC,QAAQ,KAAK;gBACpF,MAAM,mBAAmB,eAAe,OAAO,CAAC;gBAEhD,IAAI,cAAc,kBAAkB;oBAClC,SAAS;wBAAE,MAAM;oBAAa;oBAC9B,eAAe,UAAU,CAAC;oBAE1B,uBAAuB;oBACvB,gBAAgB;oBAChB;kDAAW;4BACT,gBAAgB;wBAClB;iDAAG;gBACL;YACF;QACF;iCAAG;QAAC;KAAU;IAEd,MAAM,WAAW;QACf,IAAI;YACF,SAAS;gBAAE,MAAM;gBAAe,SAAS;YAAK;YAC9C,SAAS;gBAAE,MAAM;gBAAa,SAAS;YAAK;YAE5C,MAAM,WAAW,MAAM,CAAA,GAAA,sHAAA,CAAA,UAAO,AAAD;YAE7B,gDAAgD;YAChD,IAAI,YAAwB,EAAE;YAE9B,IAAI,MAAM,OAAO,CAAC,WAAW;gBAC3B,+CAA+C;gBAC/C,YAAY;YACd,OAAO,IAAI,SAAS,IAAI,IAAI,MAAM,OAAO,CAAC,SAAS,IAAI,GAAG;gBACxD,YAAY,SAAS,IAAI;YAC3B,OAAO,IAAI,SAAS,KAAK,IAAI,MAAM,OAAO,CAAC,SAAS,KAAK,GAAG;gBAC1D,YAAY,SAAS,KAAK;YAC5B,OAAO,IAAI,SAAS,IAAI,IAAI,MAAM,OAAO,CAAC,SAAS,IAAI,GAAG;gBACxD,YAAY,SAAS,IAAI;YAC3B,OAAO;gBACL,YAAY,EAAE;YAChB;YAEA,SAAS;gBAAE,MAAM;gBAAY,SAAS;YAAU;QAClD,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,wBAAwB;YACtC,SAAS;gBAAE,MAAM;gBAAa,SAAS;YAAsB;QAC/D,SAAU;YACR,SAAS;gBAAE,MAAM;gBAAe,SAAS;YAAM;QACjD;IACF;IAEA,MAAM,mBAAmB,OAAO,WAAmB,WAAmB,CAAC,EAAE,eAAwB,iBAA6C;QAC5I,IAAI;YACF,SAAS;gBAAE,MAAM;gBAAe,SAAS;YAAK;YAC9C,SAAS;gBAAE,MAAM;gBAAa,SAAS;YAAK;YAI5C,MAAM,WAAW,MAAM,CAAA,GAAA,sHAAA,CAAA,qBAAkB,AAAD;YAExC,sEAAsE;YACtE,MAAM,eAAe,MAAM,KAAK,CAAC,IAAI,CAAC,CAAA;gBACpC,MAAM,cAAc,KAAK,OAAO,IAAI;gBACpC,MAAM,iBAAiB,iBAAiB,QAAQ;gBAChD,MAAM,YAAY,KAAK,KAAK,IAAI;gBAChC,MAAM,eAAe,iBAAiB;gBAItC,OAAO,KAAK,UAAU,KAAK,aAAa,gBAAgB,kBAAkB,cAAc;YAC1F;YAEA,IAAI,cAAc;gBAChB,gDAAgD;gBAChD,MAAM,cAAc,aAAa,QAAQ,GAAG;gBAC5C,MAAM,CAAA,GAAA,sHAAA,CAAA,qBAAkB,AAAD,EAAE,aAAa,EAAE,EAAE;gBAE1C,oDAAoD;gBACpD,SAAS;oBAAE,MAAM;oBAAe,SAAS;wBAAE,IAAI,aAAa,EAAE;wBAAE,UAAU;oBAAY;gBAAE;YAC1F,OAAO;gBACL,+BAA+B;gBAC/B,MAAM,SAAS,MAAM,CAAA,GAAA,sHAAA,CAAA,YAAS,AAAD,EAAE,WAAW,UAAU,eAAe,iBAAiB;gBAEpF,+EAA+E;gBAC/E,MAAM;YACR;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,0BAA0B;YACxC,SAAS;gBAAE,MAAM;gBAAa,SAAS;YAAwB;YAC/D,cAAc;YACd,MAAM;QACR,SAAU;YACR,SAAS;gBAAE,MAAM;gBAAe,SAAS;YAAM;QACjD;IACF;IAEA,MAAM,wBAAwB,OAAO,QAAgB;QACnD,4CAA4C;QAC5C,MAAM,WAAW,MAAM,KAAK,CAAC,IAAI,CAAC,CAAC,OAAS,KAAK,EAAE,KAAK;QACxD,IAAI,CAAC,UAAU;QACf,MAAM,eAAe,SAAS,QAAQ;QAEtC,IAAI;YACF,SAAS;gBAAE,MAAM;gBAAa,SAAS;YAAK;YAC5C,MAAM,WAAW,MAAM,CAAA,GAAA,sHAAA,CAAA,qBAAkB,AAAD;YACxC,MAAM,CAAA,GAAA,sHAAA,CAAA,qBAAkB,AAAD,EAAE,QAAQ;YAEjC,oDAAoD;YACpD,SAAS;gBAAE,MAAM;gBAAe,SAAS;oBAAE,IAAI;oBAAQ;gBAAS;YAAE;QACpE,EAAE,OAAO,OAAO;YACd,SAAS;gBAAE,MAAM;gBAAa,SAAS;YAA4B;YACnE,cAAc;YACd,MAAM;QACR;IACF;IAEA,MAAM,wBAAwB,OAAO;QACnC,yCAAyC;QACzC,MAAM,WAAW,MAAM,KAAK,CAAC,IAAI,CAAC,CAAC,OAAS,KAAK,EAAE,KAAK;QACxD,IAAI,CAAC,UAAU;QAEf,IAAI;YACF,SAAS;gBAAE,MAAM;gBAAa,SAAS;YAAK;YAC5C,MAAM,WAAW,MAAM,CAAA,GAAA,sHAAA,CAAA,qBAAkB,AAAD;YACxC,MAAM,CAAA,GAAA,sHAAA,CAAA,iBAAc,AAAD,EAAE;YAErB,oDAAoD;YACpD,SAAS;gBAAE,MAAM;gBAAe,SAAS;YAAO;QAClD,EAAE,OAAO,OAAO;YACd,SAAS;gBAAE,MAAM;gBAAa,SAAS;YAA6B;YACpE,cAAc;YACd,MAAM;QACR;IACF;IAEA,MAAM,YAAY;QAChB,SAAS;YAAE,MAAM;QAAa;IAChC;IAEA,wEAAwE;IACxE,MAAM,sBAAsB;QAC1B,wCAAmC;YACjC,aAAa,UAAU,CAAC;QAC1B;QACA,SAAS;YAAE,MAAM;QAAa;IAChC;IAEA,MAAM,QAAyB;QAC7B;QACA,WAAW;QACX,gBAAgB;QAChB,gBAAgB;QAChB;QACA;QACA,6DAA6D;QAC7D;IACF;IAEA,qBACE,6LAAC,YAAY,QAAQ;QAAC,OAAO;;YAC1B;YACA,4BACC,6LAAC;gBAAI,WAAU;;oBACZ;kCACD,6LAAC;wBAAO,WAAU;wBAAO,SAAS,IAAM,cAAc;kCAAO;;;;;;;;;;;;YAGhE,8BACC,6LAAC;gBAAI,WAAU;;oBACZ;kCACD,6LAAC;wBAAO,WAAU;wBAAO,SAAS,IAAM,gBAAgB;kCAAO;;;;;;;;;;;;;;;;;;AAKzE;GAnPgB;KAAA;AAsPT,SAAS;;IACd,MAAM,UAAU,CAAA,GAAA,6JAAA,CAAA,aAAU,AAAD,EAAE;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;IANgB","debugId":null}},
    {"offset": {"line": 1276, "column": 0}, "map": {"version":3,"sources":["file:///Users/awis/Downloads/%D9%81%D9%82%D8%B7%20%D9%84%D8%AA%D8%AC%D8%B1%D8%A8%D8%A9%20%D8%A7%D9%84%D8%AF%D9%81%D8%B9%20%D9%88%D8%A8%D8%B9%D8%AF%D9%87%D8%A7%20%D9%84%D9%84%D9%85%D8%B3%D8%ADs/seller-frontend/src/i18n.ts"],"sourcesContent":["import i18n from 'i18next';\nimport ar from '../public/locales/ar.json';\nimport en from '../public/locales/en.json';\n\nif (!i18n.isInitialized) {\n  i18n.init({\n    resources: {\n      ar: { translation: ar },\n      en: { translation: en },\n    },\n    lng: 'ar',\n    fallbackLng: 'en',\n    interpolation: { escapeValue: false },\n  });\n}\n\nexport default i18n; "],"names":[],"mappings":";;;AAAA;AACA;AACA;;;;AAEA,IAAI,CAAC,oJAAA,CAAA,UAAI,CAAC,aAAa,EAAE;IACvB,oJAAA,CAAA,UAAI,CAAC,IAAI,CAAC;QACR,WAAW;YACT,IAAI;gBAAE,aAAa,+FAAA,CAAA,UAAE;YAAC;YACtB,IAAI;gBAAE,aAAa,+FAAA,CAAA,UAAE;YAAC;QACxB;QACA,KAAK;QACL,aAAa;QACb,eAAe;YAAE,aAAa;QAAM;IACtC;AACF;uCAEe,oJAAA,CAAA,UAAI","debugId":null}},
    {"offset": {"line": 1312, "column": 0}, "map": {"version":3,"sources":["file:///Users/awis/Downloads/%D9%81%D9%82%D8%B7%20%D9%84%D8%AA%D8%AC%D8%B1%D8%A8%D8%A9%20%D8%A7%D9%84%D8%AF%D9%81%D8%B9%20%D9%88%D8%A8%D8%B9%D8%AF%D9%87%D8%A7%20%D9%84%D9%84%D9%85%D8%B3%D8%ADs/seller-frontend/src/context/LanguageContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\nimport i18n from '../i18n';\n\nconst LanguageContext = createContext({\n  language: 'ar',\n  direction: 'rtl',\n  setLanguage: (lang: string) => {},\n});\n\nexport const LanguageProvider = ({ children }: { children: React.ReactNode }) => {\n  // Initialize language from localStorage or default to 'ar'\n  const [language, setLang] = useState('ar');\n  const [isMounted, setIsMounted] = useState(false);\n  \n  const direction = language === 'ar' ? 'rtl' : 'ltr';\n\n  // Initialize language from localStorage only on client side\n  useEffect(() => {\n    setIsMounted(true);\n    const savedLanguage = localStorage.getItem('language') || 'ar';\n    setLang(savedLanguage);\n  }, []);\n\n  // Initialize document direction and i18n on first load\n  useEffect(() => {\n    if (isMounted && typeof document !== 'undefined') {\n      document.documentElement.dir = direction;\n      document.documentElement.lang = language;\n      i18n.changeLanguage(language);\n    }\n  }, [language, direction, isMounted]);\n\n  const setLanguage = (lang: string) => {\n    setLang(lang);\n    if (isMounted) {\n      i18n.changeLanguage(lang);\n      // Save to localStorage\n      if (typeof window !== 'undefined') {\n        localStorage.setItem('language', lang);\n      }\n      if (typeof document !== 'undefined') {\n        document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';\n        document.documentElement.lang = lang;\n      }\n    }\n  };\n\n  return (\n    <LanguageContext.Provider value={{ language, direction, setLanguage }}>\n      {children}\n    </LanguageContext.Provider>\n  );\n};\n\nexport const useLanguage = () => useContext(LanguageContext); "],"names":[],"mappings":";;;;;AAAA;AACA;;;;;AAEA,MAAM,gCAAkB,CAAA,GAAA,6JAAA,CAAA,gBAAa,AAAD,EAAE;IACpC,UAAU;IACV,WAAW;IACX,aAAa,CAAC,QAAkB;AAClC;AAEO,MAAM,mBAAmB,CAAC,EAAE,QAAQ,EAAiC;;IAC1E,2DAA2D;IAC3D,MAAM,CAAC,UAAU,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACrC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAE3C,MAAM,YAAY,aAAa,OAAO,QAAQ;IAE9C,4DAA4D;IAC5D,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;sCAAE;YACR,aAAa;YACb,MAAM,gBAAgB,aAAa,OAAO,CAAC,eAAe;YAC1D,QAAQ;QACV;qCAAG,EAAE;IAEL,uDAAuD;IACvD,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;sCAAE;YACR,IAAI,aAAa,OAAO,aAAa,aAAa;gBAChD,SAAS,eAAe,CAAC,GAAG,GAAG;gBAC/B,SAAS,eAAe,CAAC,IAAI,GAAG;gBAChC,8GAAA,CAAA,UAAI,CAAC,cAAc,CAAC;YACtB;QACF;qCAAG;QAAC;QAAU;QAAW;KAAU;IAEnC,MAAM,cAAc,CAAC;QACnB,QAAQ;QACR,IAAI,WAAW;YACb,8GAAA,CAAA,UAAI,CAAC,cAAc,CAAC;YACpB,uBAAuB;YACvB,wCAAmC;gBACjC,aAAa,OAAO,CAAC,YAAY;YACnC;YACA,IAAI,OAAO,aAAa,aAAa;gBACnC,SAAS,eAAe,CAAC,GAAG,GAAG,SAAS,OAAO,QAAQ;gBACvD,SAAS,eAAe,CAAC,IAAI,GAAG;YAClC;QACF;IACF;IAEA,qBACE,6LAAC,gBAAgB,QAAQ;QAAC,OAAO;YAAE;YAAU;YAAW;QAAY;kBACjE;;;;;;AAGP;GA3Ca;KAAA;AA6CN,MAAM,cAAc;;IAAM,OAAA,CAAA,GAAA,6JAAA,CAAA,aAAU,AAAD,EAAE;AAAe;IAA9C","debugId":null}},
    {"offset": {"line": 1401, "column": 0}, "map": {"version":3,"sources":["file:///Users/awis/Downloads/%D9%81%D9%82%D8%B7%20%D9%84%D8%AA%D8%AC%D8%B1%D8%A8%D8%A9%20%D8%A7%D9%84%D8%AF%D9%81%D8%B9%20%D9%88%D8%A8%D8%B9%D8%AF%D9%87%D8%A7%20%D9%84%D9%84%D9%85%D8%B3%D8%ADs/seller-frontend/src/components/CartIcon.tsx"],"sourcesContent":["'use client';\n\nimport Link from 'next/link';\nimport { useCart } from './CartContext';\nimport { useLanguage } from '../context/LanguageContext';\nimport i18n from '../i18n';\nimport { useState } from 'react';\n\ninterface CartIconProps {\n  variant?: 'light' | 'dark';\n  noLink?: boolean;\n}\n\nexport default function CartIcon({ variant = 'light', noLink = false }: CartIconProps) {\n  const { state } = useCart();\n  const { language } = useLanguage();\n  const iconSrc = variant === 'dark' ? '/bag-dark.png' : '/bag-light.png';\n\n  // Format price for tooltip\n  const formatTooltipPrice = (price: number) => {\n    if (price <= 0) return 'Free';\n    const isRTL = language === 'ar';\n    const symbol = isRTL ? 'دك' : 'KD';\n    const formattedPrice = price.toFixed(2);\n    return isRTL ? `${formattedPrice} ${symbol}` : `${symbol} ${formattedPrice}`;\n  };\n\n  const cartContent = (\n    <div className=\"flex items-center justify-center w-8 h-8 text-gray-700 hover:text-blue-600 transition-colors relative group cursor-pointer\">\n      <img src={iconSrc} alt=\"Cart\" className=\"w-9 h-9\" />\n      {/* Cart Count Badge */}\n      {state.totalItems > 0 && (\n        <span className=\"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium\">\n          {state.totalItems > 99 ? '99+' : state.totalItems}\n        </span>\n      )}\n      {/* Tooltip */}\n      <div className=\"absolute right-0 top-full mt-2 w-48 bg-white border border-gray-200 rounded-md shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50\">\n        <div className=\"p-3\">\n          <div className=\"text-sm font-medium text-gray-900\">\n            {i18n.t('cart_tooltip')} ({state.totalItems} {state.totalItems === 1 ? i18n.t('item') : i18n.t('items')})\n          </div>\n          {state.items.length > 0 && (\n            <div className=\"mt-2 text-sm text-gray-600\">\n              <div className=\"font-medium\">\n                {i18n.t('total')}: {formatTooltipPrice(state.total)}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n\n  if (noLink) {\n    return cartContent;\n  }\n\n  return (\n    <Link href=\"/cart\">\n      {cartContent}\n    </Link>\n  );\n} "],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAae,SAAS,SAAS,EAAE,UAAU,OAAO,EAAE,SAAS,KAAK,EAAiB;;IACnF,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,oIAAA,CAAA,UAAO,AAAD;IACxB,MAAM,EAAE,QAAQ,EAAE,GAAG,CAAA,GAAA,qIAAA,CAAA,cAAW,AAAD;IAC/B,MAAM,UAAU,YAAY,SAAS,kBAAkB;IAEvD,2BAA2B;IAC3B,MAAM,qBAAqB,CAAC;QAC1B,IAAI,SAAS,GAAG,OAAO;QACvB,MAAM,QAAQ,aAAa;QAC3B,MAAM,SAAS,QAAQ,OAAO;QAC9B,MAAM,iBAAiB,MAAM,OAAO,CAAC;QACrC,OAAO,QAAQ,GAAG,eAAe,CAAC,EAAE,QAAQ,GAAG,GAAG,OAAO,CAAC,EAAE,gBAAgB;IAC9E;IAEA,MAAM,4BACJ,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,KAAK;gBAAS,KAAI;gBAAO,WAAU;;;;;;YAEvC,MAAM,UAAU,GAAG,mBAClB,6LAAC;gBAAK,WAAU;0BACb,MAAM,UAAU,GAAG,KAAK,QAAQ,MAAM,UAAU;;;;;;0BAIrD,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;;gCACZ,8GAAA,CAAA,UAAI,CAAC,CAAC,CAAC;gCAAgB;gCAAG,MAAM,UAAU;gCAAC;gCAAE,MAAM,UAAU,KAAK,IAAI,8GAAA,CAAA,UAAI,CAAC,CAAC,CAAC,UAAU,8GAAA,CAAA,UAAI,CAAC,CAAC,CAAC;gCAAS;;;;;;;wBAEzG,MAAM,KAAK,CAAC,MAAM,GAAG,mBACpB,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC;gCAAI,WAAU;;oCACZ,8GAAA,CAAA,UAAI,CAAC,CAAC,CAAC;oCAAS;oCAAG,mBAAmB,MAAM,KAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAShE,IAAI,QAAQ;QACV,OAAO;IACT;IAEA,qBACE,6LAAC,+JAAA,CAAA,UAAI;QAAC,MAAK;kBACR;;;;;;AAGP;GAlDwB;;QACJ,oIAAA,CAAA,UAAO;QACJ,qIAAA,CAAA,cAAW;;;KAFV","debugId":null}},
    {"offset": {"line": 1535, "column": 0}, "map": {"version":3,"sources":["file:///Users/awis/Downloads/%D9%81%D9%82%D8%B7%20%D9%84%D8%AA%D8%AC%D8%B1%D8%A8%D8%A9%20%D8%A7%D9%84%D8%AF%D9%81%D8%B9%20%D9%88%D8%A8%D8%B9%D8%AF%D9%87%D8%A7%20%D9%84%D9%84%D9%85%D8%B3%D8%ADs/seller-frontend/src/app/web_constantsthe.ts"],"sourcesContent":["// Web constants for app-wide use\nexport const WEB_CONSTANTS = {\n  phone: \"+96592272809\",\n  email: \"ms.right.kw@gmail.com\",\n  whatsapp: \"https://wa.me/96592272809\",\n  instagram: \"https://www.instagram.com/ms.right.kw/\",\n  primaryColor: \"#1b2599\", // Header and main brand color\n  secondaryColor: \"#ff0000\", // Accent color\n  // Note: aboutUs and privacyPolicy are now handled through i18n translations\n  // Use i18n.t('about_us_content') and i18n.t('privacy_policy_content') instead\n}; "],"names":[],"mappings":"AAAA,iCAAiC;;;;AAC1B,MAAM,gBAAgB;IAC3B,OAAO;IACP,OAAO;IACP,UAAU;IACV,WAAW;IACX,cAAc;IACd,gBAAgB;AAGlB","debugId":null}},
    {"offset": {"line": 1556, "column": 0}, "map": {"version":3,"sources":["file:///Users/awis/Downloads/%D9%81%D9%82%D8%B7%20%D9%84%D8%AA%D8%AC%D8%B1%D8%A8%D8%A9%20%D8%A7%D9%84%D8%AF%D9%81%D8%B9%20%D9%88%D8%A8%D8%B9%D8%AF%D9%87%D8%A7%20%D9%84%D9%84%D9%85%D8%B3%D8%ADs/seller-frontend/src/components/Header.tsx"],"sourcesContent":["\"use client\";\nimport Link from 'next/link';\nimport Image from 'next/image';\nimport CartIcon from './CartIcon';\nimport { useState, useEffect, useRef } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { getOrCreateGuestId, SELLER_ID } from '@/utils/api';\nimport i18n from '../i18n';\nimport { useLanguage } from '../context/LanguageContext';\nimport { WEB_CONSTANTS } from '../app/web_constantsthe';\n\nexport default function Header({ seller }: { seller: any }) {\n  const { language, setLanguage, direction } = useLanguage();\n  const shopName = seller?.seller?.shop?.name || `${seller?.seller?.f_name || ''} ${seller?.seller?.l_name || ''}` || 'Seller Store';\n  const logo = seller?.seller?.image_full_url?.path;\n  \n  // Get the correct seller ID from the seller prop or fallback to environment variable\n  const currentSellerId = seller?.seller?.id || SELLER_ID;\n  const [search, setSearch] = useState('');\n  const router = useRouter();\n  const [suggestions, setSuggestions] = useState<any[]>([]);\n  const [searching, setSearching] = useState(false);\n  const [showDropdown, setShowDropdown] = useState(false);\n  const inputRef = useRef<HTMLInputElement>(null);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n\n  // Professional debounced search with proper loading states\n  useEffect(() => {\n    if (!search.trim()) {\n      setSuggestions([]);\n      setShowDropdown(false);\n      setSearching(false);\n      return;\n    }\n    \n    setSearching(true);\n    setShowDropdown(true);\n    const handler = setTimeout(async () => {\n      try {\n        const guestId = await getOrCreateGuestId();\n        const searchUrl = `https://awisapp.com/api/v1/seller/${currentSellerId}/products?q=${encodeURIComponent(search.trim())}&limit=100&guest_id=${guestId}`;\n        \n        const res = await fetch(searchUrl, {\n          headers: {\n            'Content-Type': 'application/json',\n            'Accept-Language': language,\n            'X-Language': language,\n            'lang': language === 'ar' ? 'kw' : 'en', // Add the lang header that backend expects\n          },\n        });\n        \n        const data = await res.json();\n        \n        // If no results, try alternative search approaches\n        if (!data.products || data.products.length === 0) {\n          console.log('No results found, trying alternative search...');\n          \n          // Try without guest_id parameter\n          try {\n            const altRes = await fetch(`https://awisapp.com/api/v1/seller/${currentSellerId}/products?search=${encodeURIComponent(search.trim())}&limit=8`, {\n              headers: {\n                'Content-Type': 'application/json',\n                'Accept-Language': language,\n                'X-Language': language,\n                'lang': language === 'ar' ? 'kw' : 'en',\n              },\n            });\n            const altData = await altRes.json();\n            console.log('Alternative search response:', altData);\n            if (altData.products && altData.products.length > 0) {\n              setSuggestions(altData.products);\n              return;\n            }\n          } catch (error) {\n            console.log('Alternative search failed:', error);\n          }\n          \n          // Try with different search parameter format\n          try {\n            const altRes2 = await fetch(`https://awisapp.com/api/v1/seller/${currentSellerId}/products?q=${encodeURIComponent(search.trim())}&limit=8&guest_id=${guestId}`, {\n              headers: {\n                'Content-Type': 'application/json',\n                'Accept-Language': language,\n                'X-Language': language,\n                'lang': language === 'ar' ? 'kw' : 'en',\n              },\n            });\n            const altData2 = await altRes2.json();\n            console.log('Alternative search with q parameter:', altData2);\n            console.log('Q parameter search returned:', altData2.products?.length || 0, 'products');\n            if (altData2.products && altData2.products.length > 0) {\n              setSuggestions(altData2.products);\n              return;\n            }\n          } catch (error) {\n            console.log('Alternative search with q parameter failed:', error);\n          }\n          \n          // Try with 'query' parameter\n          try {\n            const queryRes = await fetch(`https://awisapp.com/api/v1/seller/${currentSellerId}/products?query=${encodeURIComponent(search.trim())}&limit=8&guest_id=${guestId}`, {\n              headers: {\n                'Content-Type': 'application/json',\n                'Accept-Language': language,\n                'X-Language': language,\n                'lang': language === 'ar' ? 'kw' : 'en',\n              },\n            });\n            const queryData = await queryRes.json();\n            console.log('Query parameter search response:', queryData);\n            console.log('Query parameter search returned:', queryData.products?.length || 0, 'products');\n            if (queryData.products && queryData.products.length > 0) {\n              setSuggestions(queryData.products);\n              return;\n            }\n          } catch (error) {\n            console.log('Query parameter search failed:', error);\n          }\n          \n          // Try the shopView endpoint format\n          try {\n            const shopViewRes = await fetch(`https://awisapp.com/api/v1/shopView/${currentSellerId}/products?search=${encodeURIComponent(search.trim())}&limit=8`, {\n              headers: {\n                'Content-Type': 'application/json',\n                'Accept-Language': language,\n                'X-Language': language,\n                'lang': language === 'ar' ? 'kw' : 'en',\n              },\n            });\n            const shopViewData = await shopViewRes.json();\n            console.log('ShopView search response:', shopViewData);\n            if (shopViewData.products && shopViewData.products.length > 0) {\n              setSuggestions(shopViewData.products);\n              return;\n            }\n          } catch (error) {\n            console.log('ShopView search failed:', error);\n          }\n        }\n        \n        // Implement client-side filtering since the API doesn't filter by search term\n        if (data.products && data.products.length > 0) {\n          const searchTerm = search.trim().toLowerCase();\n          const filteredProducts = data.products.filter((product: any) => {\n            const productName = getLocalizedProductName(product, language).toLowerCase();\n            const productDescription = (product.details || '').toLowerCase();\n            const productCategory = (product.category?.name || '').toLowerCase();\n            \n            return productName.includes(searchTerm) || \n                   productDescription.includes(searchTerm) || \n                   productCategory.includes(searchTerm);\n          });\n          \n          // Only show results if we have matching products\n          if (filteredProducts.length > 0) {\n            setSuggestions(filteredProducts.slice(0, 8));\n          } else {\n            setSuggestions([]);\n          }\n        } else {\n          setSuggestions([]);\n        }\n      } catch {\n        setSuggestions([]);\n      } finally {\n        setSearching(false);\n      }\n    }, 500); // Increased debounce time for better UX\n    return () => clearTimeout(handler);\n  }, [search, currentSellerId, language]);\n\n  // Hide dropdown on outside click\n  useEffect(() => {\n    function handleClick(e: MouseEvent) {\n      if (\n        dropdownRef.current &&\n        !dropdownRef.current.contains(e.target as Node) &&\n        inputRef.current &&\n        !inputRef.current.contains(e.target as Node)\n      ) {\n        setShowDropdown(false);\n      }\n    }\n    document.addEventListener('mousedown', handleClick);\n    return () => document.removeEventListener('mousedown', handleClick);\n  }, []);\n\n  // Handle search submit\n  const handleSearch = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (search.trim()) {\n      router.push(`/products?search=${encodeURIComponent(search.trim())}`);\n    }\n  };\n\n  // Handle product selection from dropdown\n  const handleProductSelect = (product: any) => {\n    console.log('Product selected:', product);\n    setShowDropdown(false);\n    setSearch('');\n    router.push(`/product/${product.slug || product.id}`);\n  };\n\n  // Function to get localized product name\n  function getLocalizedProductName(product: any, language: string) {\n    if (language === 'ar' && product.translations) {\n      const t = product.translations.find(\n        (tr: any) => tr.locale === 'kw' && tr.key === 'name'\n      );\n      if (t && t.value) return t.value;\n    } else if (language === 'en' && product.translations) {\n      const t = product.translations.find(\n        (tr: any) => tr.locale === 'en' && tr.key === 'name'\n      );\n      if (t && t.value) return t.value;\n    }\n    return product.name;\n  }\n\n  // Language switcher logic\n  const langChar = language === 'ar' ? 'E' : 'ع';\n  const toggleLanguage = () => setLanguage(language === 'ar' ? 'en' : 'ar');\n\n  return (\n    <header className=\"w-full z-50 fixed top-0 left-0 right-0 border-b shadow-lg\" style={{ background: WEB_CONSTANTS.primaryColor }}>\n      {/* Top bar below header */}\n      <div style={{ background: WEB_CONSTANTS.primaryColor, height: '4px', width: '100%' }} />\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        {/* Desktop Header */}\n        <div className=\"hidden md:flex items-center justify-between py-3\" dir={direction}>\n          <div className=\"flex items-center gap-x-6 min-w-0\">\n            <Link href=\"/\" className=\"flex items-center group min-w-0\" aria-label=\"Go to home page\">\n              {logo && (\n                <Image\n                  src={logo}\n                  alt={shopName + ' - Store Logo'}\n                  width={40}\n                  height={40}\n                  className=\"h-10 w-10 rounded-full bg-white border border-gray-200 group-hover:opacity-80 transition-opacity\"\n                  priority\n                />\n              )}\n              <span className=\"mr-3 text-xl font-bold text-white truncate max-w-xs group-hover:text-gray-200 transition-colors\">\n                {shopName}\n              </span>\n            </Link>\n          </div>\n          <form onSubmit={e => e.preventDefault()} className=\"flex-1 mx-8 max-w-2xl relative\">\n            <div className=\"relative\">\n              <input\n                ref={inputRef}\n                type=\"text\"\n                className={`w-full rounded-md py-2 ${direction === 'rtl' ? 'pl-4 pr-12 text-right' : 'pl-12 pr-4 text-left'} text-black placeholder:text-black/60 bg-white focus:ring-2 focus:ring-black focus:outline-none text-lg shadow`}\n                placeholder={i18n.t('search_placeholder')}\n                value={search}\n                onChange={e => { setSearch(e.target.value); setShowDropdown(true); }}\n                onFocus={() => { if (suggestions.length > 0) setShowDropdown(true); }}\n                dir={direction}\n                autoComplete=\"off\"\n              />\n              <button type=\"submit\" className={`absolute ${direction === 'rtl' ? 'right-3' : 'left-3'} top-1/2 -translate-y-1/2 text-black hover:text-black`}>\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\">\n                  <circle cx=\"11\" cy=\"11\" r=\"8\" />\n                  <path d=\"M21 21l-2-2\" strokeLinecap=\"round\" />\n                </svg>\n              </button>\n              {/* Dropdown */}\n              {showDropdown && (searching || suggestions.length > 0) && (\n                <div ref={dropdownRef} className=\"absolute right-0 left-0 mt-2 bg-white border border-gray-200 rounded shadow-lg z-[60] max-h-80 overflow-y-auto\">\n                  {searching ? (\n                    <div className=\"flex items-center justify-center py-4 text-gray-500\">\n                      <svg className=\"animate-spin h-5 w-5 mr-2\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                        <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" strokeWidth=\"4\" style={{ stroke: WEB_CONSTANTS.primaryColor }}></circle>\n                        <path className=\"opacity-75\" d=\"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z\" style={{ fill: WEB_CONSTANTS.primaryColor }}></path>\n                      </svg>\n                      {i18n.t('searching')}\n                    </div>\n                  ) : suggestions.length === 0 ? (\n                    <div className=\"py-4 text-center text-gray-400\">{i18n.t('no_results')}</div>\n                  ) : (\n                    suggestions.map(product => (\n                      <button\n                        key={product.id}\n                        type=\"button\"\n                        className=\"w-full flex items-center gap-3 px-4 py-2 hover:bg-gray-100 text-right cursor-pointer\"\n                        onClick={(e) => {\n                          e.preventDefault();\n                          e.stopPropagation();\n                          handleProductSelect(product);\n                        }}\n                        onMouseDown={(e) => {\n                          e.preventDefault();\n                          e.stopPropagation();\n                          handleProductSelect(product);\n                        }}\n                      >\n                        {product.thumbnail_full_url?.path && (\n                          <Image src={product.thumbnail_full_url.path} alt={getLocalizedProductName(product, language)} width={40} height={40} className=\"rounded\" />\n                        )}\n                        <span className=\"flex-1 truncate\">{getLocalizedProductName(product, language)}</span>\n                      </button>\n                    ))\n                  )}\n                </div>\n              )}\n            </div>\n          </form>\n          <nav className=\"hidden lg:flex items-center gap-x-6\">\n            <Link href=\"/about\" className=\"text-white hover:text-gray-200 text-base font-medium transition-colors\">{language === 'ar' ? 'من نحن' : i18n.t('about')}</Link>\n            <Link href=\"/privacy\" className=\"text-white hover:text-gray-200 text-base font-medium transition-colors\">{language === 'ar' ? 'سياسة الخصوصية' : i18n.t('privacy_policy')}</Link>\n          </nav>\n          <button onClick={toggleLanguage} className=\"ml-6 text-white text-lg font-bold focus:outline-none hover:text-gray-200 transition-colors\" style={{background: 'none', border: 'none', boxShadow: 'none'}}>{langChar}</button>\n          <div className=\"ml-4\">\n            <CartIcon />\n          </div>\n        </div>\n        {/* Mobile Header: single row with logo, search, lang, cart */}\n        <div className=\"flex md:hidden items-center justify-between py-3 gap-x-2\" dir={direction}>\n          {/* Seller logo only on the right */}\n          <Link href=\"/\" className=\"flex items-center group min-w-0 flex-shrink-0\" aria-label=\"Go to home page\">\n            {logo && (\n              <Image\n                src={logo}\n                alt={shopName + ' - Store Logo'}\n                width={32}\n                height={32}\n                className=\"h-8 w-8 rounded-full bg-white border border-gray-200 group-hover:opacity-80 transition-opacity\"\n                priority\n              />\n            )}\n          </Link>\n          {/* Search field */}\n          <form onSubmit={e => e.preventDefault()} className=\"flex-1 mx-2 relative\">\n            <div className=\"relative\">\n              <input\n                ref={inputRef}\n                type=\"text\"\n                className={`w-full rounded-md py-2 ${direction === 'rtl' ? 'pl-4 pr-10 text-right' : 'pl-10 pr-4 text-left'} text-black placeholder:text-black/60 bg-white focus:ring-2 focus:ring-black focus:outline-none text-base shadow`}\n                placeholder={i18n.t('search_placeholder')}\n                value={search}\n                onChange={e => { setSearch(e.target.value); setShowDropdown(true); }}\n                onFocus={() => { if (suggestions.length > 0) setShowDropdown(true); }}\n                dir={direction}\n                autoComplete=\"off\"\n              />\n              <button type=\"submit\" className={`absolute ${direction === 'rtl' ? 'right-3' : 'left-3'} top-1/2 -translate-y-1/2 text-black hover:text-black`}>\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\">\n                  <circle cx=\"11\" cy=\"11\" r=\"8\" />\n                  <path d=\"M21 21l-2-2\" strokeLinecap=\"round\" />\n                </svg>\n              </button>\n              {/* Dropdown */}\n              {showDropdown && (searching || suggestions.length > 0) && (\n                <div ref={dropdownRef} className=\"absolute right-0 left-0 mt-2 bg-white border border-gray-200 rounded shadow-lg z-[60] max-h-80 overflow-y-auto\">\n                  {searching ? (\n                    <div className=\"flex items-center justify-center py-4 text-gray-500\">\n                      <svg className=\"animate-spin h-5 w-5 mr-2\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                        <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" strokeWidth=\"4\" style={{ stroke: WEB_CONSTANTS.primaryColor }}></circle>\n                        <path className=\"opacity-75\" d=\"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z\" style={{ fill: WEB_CONSTANTS.primaryColor }}></path>\n                      </svg>\n                      {i18n.t('searching')}\n                    </div>\n                  ) : suggestions.length === 0 ? (\n                    <div className=\"py-4 text-center text-gray-400\">{i18n.t('no_results')}</div>\n                  ) : (\n                    suggestions.map(product => (\n                      <button\n                        key={product.id}\n                        type=\"button\"\n                        className=\"w-full flex items-center gap-3 px-4 py-2 hover:bg-gray-100 text-right cursor-pointer\"\n                        onClick={(e) => {\n                          e.preventDefault();\n                          e.stopPropagation();\n                          handleProductSelect(product);\n                        }}\n                        onMouseDown={(e) => {\n                          e.preventDefault();\n                          e.stopPropagation();\n                          handleProductSelect(product);\n                        }}\n                      >\n                        {product.thumbnail_full_url?.path && (\n                          <Image src={product.thumbnail_full_url.path} alt={getLocalizedProductName(product, language)} width={32} height={32} className=\"rounded\" />\n                        )}\n                        <span className=\"flex-1 truncate\">{getLocalizedProductName(product, language)}</span>\n                      </button>\n                    ))\n                  )}\n                </div>\n              )}\n            </div>\n          </form>\n          {/* Language button */}\n          <button onClick={toggleLanguage} className=\"text-white text-lg font-bold focus:outline-none hover:text-gray-200 transition-colors flex-shrink-0\" style={{background: 'none', border: 'none', boxShadow: 'none'}}>{langChar}</button>\n          {/* Cart icon */}\n          <div className=\"flex-shrink-0\">\n            <CartIcon variant=\"light\" />\n          </div>\n        </div>\n      </div>\n    </header>\n  );\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2341, "column": 0}, "map": {"version":3,"sources":["file:///Users/awis/Downloads/%D9%81%D9%82%D8%B7%20%D9%84%D8%AA%D8%AC%D8%B1%D8%A8%D8%A9%20%D8%A7%D9%84%D8%AF%D9%81%D8%B9%20%D9%88%D8%A8%D8%B9%D8%AF%D9%87%D8%A7%20%D9%84%D9%84%D9%85%D8%B3%D8%ADs/seller-frontend/src/components/Copyright.tsx"],"sourcesContent":["import React from 'react';\nimport { useLanguage } from '../context/LanguageContext';\nimport i18n from '../i18n';\n\nconst Copyright = ({ className = '', whiteText = false }: { className?: string, whiteText?: boolean }) => {\n  const { direction, language } = useLanguage();\n  \n  return (\n    <a\n      href=\"https://packages.awisapp.com/\"\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      className={`flex items-center justify-center gap-2 text-center text-sm text-gray-400 hover:text-blue-500 transition-colors ${className}`}\n    >\n      {direction === 'rtl' ? (\n        <>\n          <span style={whiteText ? { color: '#fff' } : {}}>{language === 'ar' ? 'بدعم من' : i18n.t('supported_by')}</span>\n          <img src=\"/awis.png\" alt=\"awis logo\" className=\"inline h-6 align-middle\" style={{ display: 'inline' }} />\n        </>\n      ) : (\n        <>\n          <span style={whiteText ? { color: '#fff' } : {}}>{language === 'ar' ? 'بدعم من' : i18n.t('supported_by')}</span>\n          <img src=\"/awis.png\" alt=\"awis logo\" className=\"inline h-6 align-middle\" style={{ display: 'inline' }} />\n        </>\n      )}\n    </a>\n  );\n};\n\nexport default Copyright; "],"names":[],"mappings":";;;;AACA;AACA;;;;;AAEA,MAAM,YAAY,CAAC,EAAE,YAAY,EAAE,EAAE,YAAY,KAAK,EAA+C;;IACnG,MAAM,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,CAAA,GAAA,qIAAA,CAAA,cAAW,AAAD;IAE1C,qBACE,6LAAC;QACC,MAAK;QACL,QAAO;QACP,KAAI;QACJ,WAAW,CAAC,+GAA+G,EAAE,WAAW;kBAEvI,cAAc,sBACb;;8BACE,6LAAC;oBAAK,OAAO,YAAY;wBAAE,OAAO;oBAAO,IAAI,CAAC;8BAAI,aAAa,OAAO,YAAY,8GAAA,CAAA,UAAI,CAAC,CAAC,CAAC;;;;;;8BACzF,6LAAC;oBAAI,KAAI;oBAAY,KAAI;oBAAY,WAAU;oBAA0B,OAAO;wBAAE,SAAS;oBAAS;;;;;;;yCAGtG;;8BACE,6LAAC;oBAAK,OAAO,YAAY;wBAAE,OAAO;oBAAO,IAAI,CAAC;8BAAI,aAAa,OAAO,YAAY,8GAAA,CAAA,UAAI,CAAC,CAAC,CAAC;;;;;;8BACzF,6LAAC;oBAAI,KAAI;oBAAY,KAAI;oBAAY,WAAU;oBAA0B,OAAO;wBAAE,SAAS;oBAAS;;;;;;;;;;;;;AAK9G;GAvBM;;QAC4B,qIAAA,CAAA,cAAW;;;KADvC;uCAyBS","debugId":null}},
    {"offset": {"line": 2434, "column": 0}, "map": {"version":3,"sources":["file:///Users/awis/Downloads/%D9%81%D9%82%D8%B7%20%D9%84%D8%AA%D8%AC%D8%B1%D8%A8%D8%A9%20%D8%A7%D9%84%D8%AF%D9%81%D8%B9%20%D9%88%D8%A8%D8%B9%D8%AF%D9%87%D8%A7%20%D9%84%D9%84%D9%85%D8%B3%D8%ADs/seller-frontend/src/components/ContactInfoBlock.tsx"],"sourcesContent":["import { WEB_CONSTANTS } from '../app/web_constantsthe';\n\nexport default function ContactInfoBlock({ \n  className = '', \n  onlySocial = false, \n  textColor = '#222' \n}: { \n  className?: string, \n  onlySocial?: boolean,\n  textColor?: string \n}) {\n  return (\n    <div className={`flex flex-col items-center ${onlySocial ? '' : 'space-y-1'} ${className}`}>\n      {!onlySocial && (\n        <>\n          <span className=\"text-lg font-semibold\" style={{ color: textColor }} dir=\"ltr\">{WEB_CONSTANTS.phone}</span>\n          <span className=\"text-base\" style={{ color: textColor }} dir=\"ltr\">{WEB_CONSTANTS.email}</span>\n        </>\n      )}\n      <div className={`flex ${onlySocial ? 'justify-center gap-8 py-6' : 'space-x-6 mt-2'}`}>\n        <a href={WEB_CONSTANTS.instagram} target=\"_blank\" rel=\"noopener noreferrer\" aria-label=\"Instagram\" className=\"hover:opacity-80 transition-opacity\">\n          <img src=\"/Instagram_icon.png\" alt=\"Instagram\" className=\"w-7 h-7\" />\n        </a>\n        <a href={WEB_CONSTANTS.whatsapp} target=\"_blank\" rel=\"noopener noreferrer\" aria-label=\"WhatsApp\" className=\"hover:opacity-80 transition-opacity\">\n          <img src=\"/whatsapp-icon.png\" alt=\"WhatsApp\" className=\"w-7 h-7\" />\n        </a>\n      </div>\n    </div>\n  );\n} "],"names":[],"mappings":";;;;AAAA;;;AAEe,SAAS,iBAAiB,EACvC,YAAY,EAAE,EACd,aAAa,KAAK,EAClB,YAAY,MAAM,EAKnB;IACC,qBACE,6LAAC;QAAI,WAAW,CAAC,2BAA2B,EAAE,aAAa,KAAK,YAAY,CAAC,EAAE,WAAW;;YACvF,CAAC,4BACA;;kCACE,6LAAC;wBAAK,WAAU;wBAAwB,OAAO;4BAAE,OAAO;wBAAU;wBAAG,KAAI;kCAAO,iIAAA,CAAA,gBAAa,CAAC,KAAK;;;;;;kCACnG,6LAAC;wBAAK,WAAU;wBAAY,OAAO;4BAAE,OAAO;wBAAU;wBAAG,KAAI;kCAAO,iIAAA,CAAA,gBAAa,CAAC,KAAK;;;;;;;;0BAG3F,6LAAC;gBAAI,WAAW,CAAC,KAAK,EAAE,aAAa,8BAA8B,kBAAkB;;kCACnF,6LAAC;wBAAE,MAAM,iIAAA,CAAA,gBAAa,CAAC,SAAS;wBAAE,QAAO;wBAAS,KAAI;wBAAsB,cAAW;wBAAY,WAAU;kCAC3G,cAAA,6LAAC;4BAAI,KAAI;4BAAsB,KAAI;4BAAY,WAAU;;;;;;;;;;;kCAE3D,6LAAC;wBAAE,MAAM,iIAAA,CAAA,gBAAa,CAAC,QAAQ;wBAAE,QAAO;wBAAS,KAAI;wBAAsB,cAAW;wBAAW,WAAU;kCACzG,cAAA,6LAAC;4BAAI,KAAI;4BAAqB,KAAI;4BAAW,WAAU;;;;;;;;;;;;;;;;;;;;;;;AAKjE;KA3BwB","debugId":null}},
    {"offset": {"line": 2541, "column": 0}, "map": {"version":3,"sources":["file:///Users/awis/Downloads/%D9%81%D9%82%D8%B7%20%D9%84%D8%AA%D8%AC%D8%B1%D8%A8%D8%A9%20%D8%A7%D9%84%D8%AF%D9%81%D8%B9%20%D9%88%D8%A8%D8%B9%D8%AF%D9%87%D8%A7%20%D9%84%D9%84%D9%85%D8%B3%D8%ADs/seller-frontend/src/app/MobileNavBar.tsx"],"sourcesContent":["\"use client\";\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\nimport { useCart } from \"@/components/CartContext\";\nimport { useState, useEffect, useRef } from \"react\";\nimport Copyright from '@/components/Copyright';\nimport { WEB_CONSTANTS } from './web_constantsthe';\nimport CartIcon from '@/components/CartIcon';\nimport ContactInfoBlock from '@/components/ContactInfoBlock';\nimport { useLanguage } from '../context/LanguageContext';\nimport i18n from '../i18n';\n\nexport default function MobileNavBar() {\n  const pathname = usePathname();\n  const { state } = useCart();\n  const { language, direction, setLanguage } = useLanguage();\n  const [showMore, setShowMore] = useState(false);\n  const [isSlidingDown, setIsSlidingDown] = useState(false);\n  const [touchStartY, setTouchStartY] = useState<number | null>(null);\n  const [dragY, setDragY] = useState(0);\n  const headerRef = useRef<HTMLDivElement>(null);\n\n  // Prevent background scroll when sheet is open\n  useEffect(() => {\n    if (showMore) {\n      document.body.style.overflow = 'hidden';\n      document.documentElement.style.overflow = 'hidden';\n    } else {\n      document.body.style.overflow = '';\n      document.documentElement.style.overflow = '';\n    }\n    return () => {\n      document.body.style.overflow = '';\n      document.documentElement.style.overflow = '';\n    };\n  }, [showMore]);\n\n  const [touchDeltaY, setTouchDeltaY] = useState(0);\n\n  // Handle closing with animation\n  const closeSheet = () => {\n    setIsSlidingDown(true);\n    setTimeout(() => {\n      setShowMore(false);\n      setIsSlidingDown(false);\n    }, 350); // match slide down duration\n  };\n\n  // Handle language switching\n  const handleLanguageSwitch = () => {\n    const newLanguage = language === 'ar' ? 'en' : 'ar';\n    setLanguage(newLanguage);\n    setShowMore(false);\n  };\n\n  return (\n    <>\n      <nav className=\"fixed bottom-0 left-0 right-0 z-50 border-t border-gray-200 shadow-lg lg:hidden flex justify-around items-center h-16\" style={{ background: '#fff' }}>\n        <Link href=\"/\" className={`flex flex-col items-center justify-center text-xs font-semibold transition-colors group pt-1 w-full${pathname === \"/\" ? \" selected-nav\" : \"\"}`} style={pathname === \"/\" ? { borderTop: `2px solid ${WEB_CONSTANTS.primaryColor}`, color: WEB_CONSTANTS.primaryColor, background: '#fff' } : { color: '#444', background: '#fff' }}>\n          <svg className=\"w-6 h-6 mb-0.5\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\" style={pathname === \"/\" ? { stroke: WEB_CONSTANTS.primaryColor } : { stroke: '#444' }}>\n            <rect x=\"3\" y=\"3\" width=\"7\" height=\"7\" rx=\"1.5\" stroke=\"currentColor\"/>\n            <rect x=\"14\" y=\"3\" width=\"7\" height=\"7\" rx=\"1.5\" stroke=\"currentColor\"/>\n            <rect x=\"14\" y=\"14\" width=\"7\" height=\"7\" rx=\"1.5\" stroke=\"currentColor\"/>\n            <rect x=\"3\" y=\"14\" width=\"7\" height=\"7\" rx=\"1.5\" stroke=\"currentColor\"/>\n          </svg>\n          {language === 'ar' ? 'القائمة' : i18n.t('menu')}\n        </Link>\n        <Link href=\"/orders\" className={`flex flex-col items-center justify-center text-xs font-semibold transition-colors group pt-1 w-full${pathname.startsWith(\"/orders\") ? \" selected-nav\" : \"\"}`} style={pathname.startsWith(\"/orders\") ? { borderTop: `2px solid ${WEB_CONSTANTS.primaryColor}`, color: WEB_CONSTANTS.primaryColor, background: '#fff' } : { color: '#444', background: '#fff' }}>\n          <svg className=\"w-6 h-6 mb-0.5\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\" style={pathname.startsWith(\"/orders\") ? { stroke: WEB_CONSTANTS.primaryColor } : { stroke: '#444' }}>\n            <rect x=\"4\" y=\"4\" width=\"16\" height=\"16\" rx=\"2\" stroke=\"currentColor\"/>\n            <path d=\"M8 10h8M8 14h5\" stroke=\"currentColor\"/>\n          </svg>\n          {language === 'ar' ? 'حالة الطلب' : i18n.t('order_status')}\n        </Link>\n        <Link href=\"/cart\" className={`relative flex flex-col items-center justify-center text-xs font-semibold transition-colors group pt-1 w-full${pathname.startsWith(\"/cart\") ? \" selected-nav\" : \"\"}`} style={pathname.startsWith(\"/cart\") ? { borderTop: `2px solid ${WEB_CONSTANTS.primaryColor}`, color: WEB_CONSTANTS.primaryColor, background: '#fff' } : { color: '#444', background: '#fff' }}>\n          <CartIcon variant=\"dark\" noLink />\n          {language === 'ar' ? 'السلة' : i18n.t('cart')}\n        </Link>\n        <button\n          type=\"button\"\n          onClick={() => { setShowMore(true); setIsSlidingDown(false); }}\n          className={`flex flex-col items-center justify-center text-xs font-semibold transition-colors group pt-1 w-full${pathname.startsWith(\"/more\") ? \" selected-nav\" : \"\"}`}\n          style={pathname.startsWith(\"/more\") ? { borderTop: `2px solid ${WEB_CONSTANTS.primaryColor}`, color: WEB_CONSTANTS.primaryColor, background: '#fff' } : { color: '#444', background: '#fff' }}\n          aria-label={language === 'ar' ? 'المزيد' : i18n.t('more')}\n        >\n          <svg className=\"w-6 h-6 mb-0.5\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\" style={pathname.startsWith(\"/more\") ? { stroke: WEB_CONSTANTS.primaryColor } : { stroke: '#444' }}>\n            <rect x=\"4\" y=\"4\" width=\"16\" height=\"16\" rx=\"2\" stroke=\"currentColor\" />\n            <path d=\"M8 8h8M8 12h8M8 16h8\" stroke=\"currentColor\" />\n          </svg>\n          {language === 'ar' ? 'المزيد' : i18n.t('more')}\n        </button>\n      </nav>\n      {/* Bottom Sheet Modal */}\n      {showMore && (\n        <>\n          {/* Overlay */}\n          <div className=\"fixed inset-0 z-50 bg-[rgba(0,0,0,0.2)] transition-opacity\" onClick={closeSheet} aria-label=\"إغلاق المزيد\" />\n          {/* Sheet */}\n          <div\n            className={`fixed inset-x-0 bottom-0 z-50 bg-white rounded-t-2xl shadow-2xl overflow-hidden max-h-[60vh] min-h-[60vh] flex flex-col ${isSlidingDown ? 'animate-bottomSheetSlideDown' : 'animate-bottomSheetSlideUp'}`}\n            dir={direction}\n            style={{\n              boxShadow: '0 -8px 32px 0 rgba(0,0,0,0.10)',\n              transform: dragY > 0 ? `translateY(${dragY}px)` : undefined,\n              transition: dragY === 0 ? 'transform 0.25s cubic-bezier(0.4,0,0.2,1)' : undefined,\n            }}\n            onTouchStart={e => setTouchStartY(e.touches[0].clientY)}\n            onTouchMove={e => {\n              if (touchStartY !== null) {\n                const deltaY = e.touches[0].clientY - touchStartY;\n                if (deltaY > 0) setDragY(deltaY);\n              }\n            }}\n            onTouchEnd={() => {\n              if (dragY > 80) {\n                closeSheet();\n              }\n              setTouchStartY(null);\n              setDragY(0);\n            }}\n          >\n            {/* Header */}\n            <div\n              ref={headerRef}\n              className={`flex items-center px-4 py-3 border-b border-gray-200 touch-none select-none cursor-grab active:cursor-grabbing ${direction === 'rtl' ? 'justify-between' : 'justify-between'}`}\n              onTouchStart={e => setTouchStartY(e.touches[0].clientY)}\n              onTouchMove={e => {\n                if (touchStartY !== null) {\n                  const deltaY = e.touches[0].clientY - touchStartY;\n                  if (deltaY > 0) setDragY(deltaY);\n                }\n              }}\n              onTouchEnd={() => {\n                if (dragY > 80) {\n                  setShowMore(false);\n                }\n                setTouchStartY(null);\n                setDragY(0);\n              }}\n            >\n              <span className=\"text-lg font-bold text-gray-900\">{language === 'ar' ? 'المزيد' : i18n.t('more')}</span>\n              <button onClick={closeSheet} aria-label={language === 'ar' ? 'إغلاق' : 'Close'} className=\"text-2xl text-gray-400 hover:text-red-500 focus:outline-none\">❌</button>\n            </div>\n            {/* First Section */}\n            <div className=\"divide-y divide-gray-100\">\n              <button onClick={() => { setShowMore(false); window.location.href = '/contact'; }} className={`w-full flex items-center px-4 py-4 hover:bg-gray-50 focus:outline-none ${direction === 'rtl' ? 'flex-row text-right' : 'flex-row text-left'}`}>\n                <span className={direction === 'rtl' ? 'ml-3 flex-shrink-0' : 'mr-3 flex-shrink-0'}>\n                  <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\" style={{ color: WEB_CONSTANTS.primaryColor }}>\n                    <path d=\"M22 16.92V19a2 2 0 01-2 2A18 18 0 013 5a2 2 0 012-2h2.09a1 1 0 01.95.68l1.13 3.39a1 1 0 01-.23 1.09l-1.27 1.27a16 16 0 006.6 6.6l1.27-1.27a1 1 0 011.09-.23l3.39 1.13a1 1 0 01.68.95z\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                  </svg>\n                </span>\n                <span className={`flex-1 text-base font-medium text-gray-900 ${direction === 'rtl' ? 'text-right' : 'text-left'}`}>{language === 'ar' ? 'اتصل بنا' : i18n.t('contact')}</span>\n                <span className={direction === 'rtl' ? 'mr-3 flex-shrink-0 text-gray-400' : 'ml-3 flex-shrink-0 text-gray-400'}>\n                  <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\">\n                    <path d={direction === 'rtl' ? 'M15 19l-7-7 7-7' : 'M9 5l7 7-7 7'} strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n                  </svg>\n                </span>\n              </button>\n              <button onClick={() => { setShowMore(false); window.location.href = '/about'; }} className={`w-full flex items-center px-4 py-4 hover:bg-gray-50 focus:outline-none ${direction === 'rtl' ? 'flex-row text-right' : 'flex-row text-left'}`}>\n                <span className={direction === 'rtl' ? 'ml-3 flex-shrink-0' : 'mr-3 flex-shrink-0'}>\n                  <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\" style={{ color: WEB_CONSTANTS.primaryColor }}>\n                    <circle cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"2\"/>\n                    <path d=\"M12 16v-4\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n                    <circle cx=\"12\" cy=\"8\" r=\"1\" fill=\"currentColor\"/>\n                  </svg>\n                </span>\n                <span className={`flex-1 text-base font-medium text-gray-900 ${direction === 'rtl' ? 'text-right' : 'text-left'}`}>{language === 'ar' ? 'من نحن' : i18n.t('about')}</span>\n                <span className={direction === 'rtl' ? 'mr-3 flex-shrink-0 text-gray-400' : 'ml-3 flex-shrink-0 text-gray-400'}>\n                  <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\">\n                    <path d={direction === 'rtl' ? 'M15 19l-7-7 7-7' : 'M9 5l7 7-7 7'} strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n                  </svg>\n                </span>\n              </button>\n            </div>\n            {/* Second Section */}\n            <div className=\"my-2 border-t border-gray-100\" />\n            <div className=\"divide-y divide-gray-100\">\n              <button onClick={() => { setShowMore(false); window.location.href = '/privacy'; }} className={`w-full flex items-center px-4 py-4 hover:bg-gray-50 focus:outline-none ${direction === 'rtl' ? 'flex-row text-right' : 'flex-row text-left'}`}>\n                <span className={direction === 'rtl' ? 'ml-3 flex-shrink-0' : 'mr-3 flex-shrink-0'}>\n                  <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\" style={{ color: WEB_CONSTANTS.primaryColor }}>\n                    <rect x=\"4\" y=\"4\" width=\"16\" height=\"16\" rx=\"2\" stroke=\"currentColor\" strokeWidth=\"2\"/>\n                    <path d=\"M8 8h8M8 12h8M8 16h8\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n                  </svg>\n                </span>\n                <span className={`flex-1 text-base font-medium text-gray-900 ${direction === 'rtl' ? 'text-right' : 'text-left'}`}>{language === 'ar' ? 'سياسة الخصوصية' : i18n.t('privacy_policy')}</span>\n                <span className={direction === 'rtl' ? 'mr-3 flex-shrink-0 text-gray-400' : 'ml-3 flex-shrink-0 text-gray-400'}>\n                  <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\">\n                    <path d={direction === 'rtl' ? 'M15 19l-7-7 7-7' : 'M9 5l7 7-7 7'} strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n                  </svg>\n                </span>\n              </button>\n              <button \n                onClick={handleLanguageSwitch}\n                className={`w-full flex items-center px-4 py-4 hover:bg-gray-50 focus:outline-none ${direction === 'rtl' ? 'flex-row text-right' : 'flex-row text-left'}`}\n              >\n                <span className={direction === 'rtl' ? 'ml-3 flex-shrink-0' : 'mr-3 flex-shrink-0'}>\n                  <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\" style={{ color: WEB_CONSTANTS.primaryColor }}>\n                    <path d=\"M12 4v16m8-8H4\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n                  </svg>\n                </span>\n                <span className={`flex-1 text-base font-medium text-gray-900 ${direction === 'rtl' ? 'text-right' : 'text-left'}`}>\n                  {language === 'ar' ? 'اللغة' : i18n.t('language')} ({language === 'ar' ? 'العربية' : 'English'})\n                </span>\n                <span className={direction === 'rtl' ? 'mr-3 flex-shrink-0 text-gray-400' : 'ml-3 flex-shrink-0 text-gray-400'}>\n                  <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\">\n                    <path d={direction === 'rtl' ? 'M15 19l-7-7 7-7' : 'M9 5l7 7-7 7'} strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n                  </svg>\n                </span>\n              </button>\n            </div>\n            {/* Social Media Section */}\n            <ContactInfoBlock className=\"py-6\" onlySocial />\n            {/* Footer Section */}\n            <Copyright className=\"mt-2 mb-1\" />\n            <div className=\"flex justify-center py-2\">\n              <img src=\"/payment-logos.png\" alt=\"طرق الدفع\" className=\"h-8 object-contain\" />\n            </div>\n          </div>\n        </>\n      )}\n    </>\n  );\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3372, "column": 0}, "map": {"version":3,"sources":["file:///Users/awis/Downloads/%D9%81%D9%82%D8%B7%20%D9%84%D8%AA%D8%AC%D8%B1%D8%A8%D8%A9%20%D8%A7%D9%84%D8%AF%D9%81%D8%B9%20%D9%88%D8%A8%D8%B9%D8%AF%D9%87%D8%A7%20%D9%84%D9%84%D9%85%D8%B3%D8%ADs/seller-frontend/src/components/OfflineNotification.tsx"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from 'react';\nimport { cache } from '@/lib/cache';\nimport { useLanguage } from '@/context/LanguageContext';\nimport i18n from '@/i18n';\n\nexport default function OfflineNotification() {\n  const [isOffline, setIsOffline] = useState(false);\n  const [showRetryMessage, setShowRetryMessage] = useState(false);\n  const { language } = useLanguage();\n\n  useEffect(() => {\n    // Initial state\n    setIsOffline(cache.isOffline());\n\n    // Subscribe to online/offline status changes\n    const unsubscribe = cache.onOnlineStatusChange((online) => {\n      setIsOffline(!online);\n      if (online) {\n        // Show brief \"back online\" message\n        setShowRetryMessage(true);\n        setTimeout(() => setShowRetryMessage(false), 3000);\n      }\n    });\n\n    return unsubscribe;\n  }, []);\n\n  if (!isOffline && !showRetryMessage) return null;\n\n  return (\n    <div className=\"fixed top-0 left-0 right-0 z-50\">\n      {isOffline ? (\n        <div className=\"bg-red-600 text-white px-4 py-2 text-center text-sm\">\n          <div className=\"flex items-center justify-center space-x-2\">\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n            </svg>\n            <span>\n              {language === 'ar' \n                ? 'لا يوجد اتصال بالإنترنت. يتم عرض المحتوى المحفوظ.' \n                : 'No internet connection. Showing cached content.'}\n            </span>\n          </div>\n        </div>\n      ) : showRetryMessage ? (\n        <div className=\"bg-green-600 text-white px-4 py-2 text-center text-sm\">\n          <div className=\"flex items-center justify-center space-x-2\">\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n            </svg>\n            <span>\n              {language === 'ar' \n                ? 'عاد الاتصال بالإنترنت. يتم تحديث المحتوى...' \n                : 'Back online. Refreshing content...'}\n            </span>\n          </div>\n        </div>\n      ) : null}\n    </div>\n  );\n} "],"names":[],"mappings":";;;;AACA;AACA;AACA;;;AAHA;;;;AAMe,SAAS;;IACtB,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACzD,MAAM,EAAE,QAAQ,EAAE,GAAG,CAAA,GAAA,qIAAA,CAAA,cAAW,AAAD;IAE/B,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;yCAAE;YACR,gBAAgB;YAChB,aAAa,sHAAA,CAAA,QAAK,CAAC,SAAS;YAE5B,6CAA6C;YAC7C,MAAM,cAAc,sHAAA,CAAA,QAAK,CAAC,oBAAoB;6DAAC,CAAC;oBAC9C,aAAa,CAAC;oBACd,IAAI,QAAQ;wBACV,mCAAmC;wBACnC,oBAAoB;wBACpB;yEAAW,IAAM,oBAAoB;wEAAQ;oBAC/C;gBACF;;YAEA,OAAO;QACT;wCAAG,EAAE;IAEL,IAAI,CAAC,aAAa,CAAC,kBAAkB,OAAO;IAE5C,qBACE,6LAAC;QAAI,WAAU;kBACZ,0BACC,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;wBAAU,MAAK;wBAAO,QAAO;wBAAe,SAAQ;kCACjE,cAAA,6LAAC;4BAAK,eAAc;4BAAQ,gBAAe;4BAAQ,aAAa;4BAAG,GAAE;;;;;;;;;;;kCAEvE,6LAAC;kCACE,aAAa,OACV,sDACA;;;;;;;;;;;;;;;;mBAIR,iCACF,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;wBAAU,MAAK;wBAAO,QAAO;wBAAe,SAAQ;kCACjE,cAAA,6LAAC;4BAAK,eAAc;4BAAQ,gBAAe;4BAAQ,aAAa;4BAAG,GAAE;;;;;;;;;;;kCAEvE,6LAAC;kCACE,aAAa,OACV,gDACA;;;;;;;;;;;;;;;;mBAIR;;;;;;AAGV;GAvDwB;;QAGD,qIAAA,CAAA,cAAW;;;KAHV","debugId":null}},
    {"offset": {"line": 3521, "column": 0}, "map": {"version":3,"sources":["file:///Users/awis/Downloads/%D9%81%D9%82%D8%B7%20%D9%84%D8%AA%D8%AC%D8%B1%D8%A8%D8%A9%20%D8%A7%D9%84%D8%AF%D9%81%D8%B9%20%D9%88%D8%A8%D8%B9%D8%AF%D9%87%D8%A7%20%D9%84%D9%84%D9%85%D8%B3%D8%ADs/seller-frontend/src/app/ClientLayout.tsx"],"sourcesContent":["\"use client\";\nimport type { ReactNode } from \"react\";\nimport { Geist, Geist_Mono } from \"next/font/google\";\nimport \"./globals.css\";\nimport { CartProvider } from \"@/components/CartContext\";\nimport Header from '@/components/Header';\nimport { getSellerInfo } from '@/utils/api';\nimport MobileNavBar from \"./MobileNavBar\";\nimport { LanguageProvider } from '../context/LanguageContext';\nimport OfflineNotification from '@/components/OfflineNotification';\nimport { usePathname } from 'next/navigation';\nimport { useEffect } from 'react';\nimport { cache } from '@/lib/cache';\n\nconst geistSans = Geist({\n  variable: \"--font-geist-sans\",\n  subsets: [\"latin\"],\n});\n\nconst geistMono = Geist_Mono({\n  variable: \"--font-geist-mono\",\n  subsets: [\"latin\"],\n});\n\nexport default function ClientLayout({ seller, children }: { seller: any, children: ReactNode }) {\n  const pathname = usePathname();\n\n  // Scroll to top when pathname changes\n  useEffect(() => {\n    if (typeof window !== 'undefined') {\n      window.scrollTo(0, 0);\n    }\n  }, [pathname]);\n\n  // Periodic cache cleanup and service worker registration\n  useEffect(() => {\n    // Clean cache on app start\n    cache.cleanup();\n\n    // Set up periodic cleanup every 30 minutes\n    const cleanupInterval = setInterval(() => {\n      cache.cleanup();\n    }, 30 * 60 * 1000);\n\n    // Register service worker\n    if ('serviceWorker' in navigator) {\n      navigator.serviceWorker.register('/sw.js')\n        .then((registration) => {\n          console.log('Service Worker registered:', registration);\n        })\n        .catch((error) => {\n          console.log('Service Worker registration failed:', error);\n        });\n    }\n\n    return () => clearInterval(cleanupInterval);\n  }, []);\n\n  return (\n    <LanguageProvider>\n      <body className={`${geistSans.variable} ${geistMono.variable} antialiased`}>\n        <CartProvider>\n          <OfflineNotification />\n          <Header seller={seller} />\n          {children}\n          <MobileNavBar />\n        </CartProvider>\n      </body>\n    </LanguageProvider>\n  );\n} "],"names":[],"mappings":";;;;;;AAIA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAZA;;;;;;;;;;;;AAwBe,SAAS,aAAa,EAAE,MAAM,EAAE,QAAQ,EAAwC;;IAC7F,MAAM,WAAW,CAAA,GAAA,qIAAA,CAAA,cAAW,AAAD;IAE3B,sCAAsC;IACtC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACR,wCAAmC;gBACjC,OAAO,QAAQ,CAAC,GAAG;YACrB;QACF;iCAAG;QAAC;KAAS;IAEb,yDAAyD;IACzD,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACR,2BAA2B;YAC3B,sHAAA,CAAA,QAAK,CAAC,OAAO;YAEb,2CAA2C;YAC3C,MAAM,kBAAkB;0DAAY;oBAClC,sHAAA,CAAA,QAAK,CAAC,OAAO;gBACf;yDAAG,KAAK,KAAK;YAEb,0BAA0B;YAC1B,IAAI,mBAAmB,WAAW;gBAChC,UAAU,aAAa,CAAC,QAAQ,CAAC,UAC9B,IAAI;8CAAC,CAAC;wBACL,QAAQ,GAAG,CAAC,8BAA8B;oBAC5C;6CACC,KAAK;8CAAC,CAAC;wBACN,QAAQ,GAAG,CAAC,uCAAuC;oBACrD;;YACJ;YAEA;0CAAO,IAAM,cAAc;;QAC7B;iCAAG,EAAE;IAEL,qBACE,6LAAC,qIAAA,CAAA,mBAAgB;kBACf,cAAA,6LAAC;YAAK,WAAW,GAAG,4IAAA,CAAA,UAAS,CAAC,QAAQ,CAAC,CAAC,EAAE,iJAAA,CAAA,UAAS,CAAC,QAAQ,CAAC,YAAY,CAAC;sBACxE,cAAA,6LAAC,oIAAA,CAAA,eAAY;;kCACX,6LAAC,4IAAA,CAAA,UAAmB;;;;;kCACpB,6LAAC,+HAAA,CAAA,UAAM;wBAAC,QAAQ;;;;;;oBACf;kCACD,6LAAC,8HAAA,CAAA,UAAY;;;;;;;;;;;;;;;;;;;;;AAKvB;GA9CwB;;QACL,qIAAA,CAAA,cAAW;;;KADN","debugId":null}}]
}